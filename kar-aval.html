<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <!-- <link rel="stylesheet" href="caraval.css"> -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>aval</title>
  <style>

/* ====== Ù…Ø¯ÛŒØ§ Ú©ÙˆØ¦Ø±ÛŒ Ø¨Ø±Ø§ÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ ====== */
@media (max-width: 768px) {
  header {
    justify-content: center;
    padding: 10px;
  }

  .center-icon {
    position: static;
    transform: none;
    margin: 0 auto;
  }

  #mmd img {
    position: static;
    transform: none;
  }

  #aaa {
    position: static;
    transform: none;
    margin-left: auto;
  }

  .center-group {
    position: static;
    transform: none;
    flex-wrap: wrap;
    justify-content: center;
    gap: 10px;
    margin-top: 10px;
  }

  .center-group a {
    font-size: 0.9rem;
    padding: 6px 8px;
  }

  #carouselExample {
    max-width: 100%;
    height: auto;
    margin-top: 20px;
  }

  .carousel-item {
    height: auto;
  }

  .carousel-item img {
    max-height: 250px !important;
    width: 100% !important;
    object-fit: contain !important;
  }

  .cards-container {
    flex-direction: column;
    align-items: center;
    padding-top: 30px;
  }

  .apple-card {
    width: 90vw;
    max-width: 320px;
  }
}
/* Ù…Ù†ÙˆÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ ÙˆØ§Ú©Ù†Ø´â€ŒÚ¯Ø±Ø§ */
.hamburger-menu {
  display: none;
  position: relative;
}

.hamburger-icon {
  font-size: 28px;
  cursor: pointer;
  padding: 10px 15px;
  user-select: none;
  z-index: 1001;
  background: transparent;
  border: none;
  color: #333;
  font-weight: bold;
}

.mobile-menu {
  display: none;
  position: fixed;
  top: 60px;
  right: 0;
  width: 100%;
  background-color: white;
  flex-direction: column;
  padding: 15px 20px;
  z-index: 1000;
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  border-top: 1px solid #ddd;
}

.mobile-menu a {
  padding: 12px 0;
  color: #333;
  font-weight: bold;
  text-decoration: none;
  border-bottom: 1px solid #eee;
}

.mobile-menu a:hover {
  background-color: #f0f0f0;
  border-radius: 4px;
}

#menu-toggle:checked + .hamburger-icon + .mobile-menu {
  display: flex;
}
.cards-container {
  display: flex;
  gap: 48px;
  justify-content: center;
  padding: 80px 20px 120px;
  flex-wrap: wrap;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen,
    Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
}

.apple-card {
  max-width: 280px;
  background: transparent;
  text-align: center;
  cursor: pointer;
  transition: transform 0.3s ease;
  color: #1d1d1f;
}

.apple-card:hover {
  transform: translateY(-10px);
}

.apple-card img {
  width: 100%;
  height: auto;
  border-radius: 20px;
  box-shadow: 0 20px 40px rgb(0 0 0 / 0.1);
  margin-bottom: 20px;
}

.apple-card-content h3 {
  font-weight: 600;
  font-size: 1.4rem;
  margin-bottom: 6px;
}

.apple-card-content p {
  font-size: 1rem;
  color: #636366;
  line-height: 1.4;
  margin-bottom: 20px;
  min-height: 72px; /* Ø­ÙØ¸ ÛŒÚ©Ù†ÙˆØ§Ø®ØªÛŒ Ø§Ø±ØªÙØ§Ø¹ Ú©Ø§Ø±Øª */
}
    .card-actions {
      margin-top: 10px;
      display: flex;
      gap: 10px;
    }
    .btn-link, .add-to-cart {
      flex: 1;
      padding: 10px;
      text-align: center;
      cursor: pointer;
      border-radius: 4px;
      border: none;
      font-weight: bold;
      text-decoration: none;
      user-select: none;
    }

    .add-to-cart {
      background-color: #5cb85c;
      color: white;
    }
    .add-to-cart:hover {
      background-color: #449d44;
    }

    /* ===== Ø³ÛŒØ³ØªÙ… Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† ===== */
    .user-notification-center {
      position: fixed;
      top: 20px;
      right: 20px;
      width: 350px;
      max-height: 400px;
      background: white;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      z-index: 1000;
      overflow-y: auto;
      display: none;
    }
    
    .user-notification-header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 15px;
      border-radius: 15px 15px 0 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .user-notification-item {
      padding: 15px;
      border-bottom: 1px solid #eee;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    
    .user-notification-item:hover {
      background: #f8f9fa;
    }
    
    .user-notification-item.unread {
      background: #e3f2fd;
      border-right: 4px solid #2196f3;
    }
    
    .user-notification-time {
      font-size: 12px;
      color: #666;
      margin-top: 5px;
    }
    
    .notification-badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background: #e74c3c;
      color: white;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: bold;
    }
    
    .user-toast-notification {
      position: fixed;
      top: 20px;
      left: 20px;
      background: white;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      z-index: 1001;
      max-width: 300px;
      animation: slideIn 0.3s ease;
    }
    
    @keyframes slideIn {
      from {
        transform: translateX(-100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }
    
    .user-toast-notification.info {
      border-right: 4px solid #3498db;
    }
    
    .user-toast-notification.success {
      border-right: 4px solid #27ae60;
    }
    
    .user-toast-notification.warning {
      border-right: 4px solid #f39c12;
    }
    
    .user-toast-notification.promotion {
      border-right: 4px solid #e74c3c;
    }

    /* ===== Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ù…Ø­ØµÙˆÙ„ ===== */
    .product-badges {
      position: absolute;
      top: 10px;
      right: 10px;
      display: flex;
      flex-direction: column;
      gap: 5px;
      z-index: 10;
    }

    .badge {
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: bold;
      color: white;
      text-align: center;
    }

    .badge.discount {
      background: linear-gradient(45deg, #ff6b6b, #ee5a24);
    }

    .badge.new {
      background: linear-gradient(45deg, #2ed573, #1e90ff);
    }

    .badge.popular {
      background: linear-gradient(45deg, #ffa502, #ff6348);
    }

    .apple-card {
      position: relative;
      overflow: hidden;
      transition: all 0.3s ease;
    }

    .apple-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 30px rgba(0,0,0,0.15);
    }

    .product-category {
      font-size: 12px;
      color: #666;
      margin-bottom: 8px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .product-rating {
      display: flex;
      align-items: center;
      gap: 5px;
      margin: 8px 0;
    }

    .stars {
      color: #ffd700;
      font-size: 14px;
    }

    .rating-text {
      font-size: 12px;
      color: #666;
    }

    .product-price-container {
      display: flex;
      align-items: center;
      gap: 10px;
      margin: 10px 0;
    }

    .original-price {
      text-decoration: line-through;
      color: #999;
      font-size: 14px;
    }

    .final-price {
      color: #27ae60;
      font-weight: bold;
      font-size: 16px;
    }

    .product-meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 10px 0;
      font-size: 12px;
    }

    .stock-status {
      padding: 2px 8px;
      border-radius: 10px;
      font-weight: bold;
    }

    .stock-status.in-stock {
      background: #d4edda;
      color: #155724;
    }

    .stock-status.out-of-stock {
      background: #f8d7da;
      color: #721c24;
    }

    .stock-count {
      color: #666;
    }

    .card-actions {
      display: flex;
      gap: 8px;
      margin-top: 15px;
    }

    .card-actions button {
      flex: 1;
      padding: 8px 12px;
      border: none;
      border-radius: 6px;
      font-size: 12px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .add-to-cart {
      background: #27ae60;
      color: white;
    }

    .add-to-cart:hover:not(:disabled) {
      background: #0d4926;
      transform: translateY(-1px);
    }

    .add-to-cart:disabled {
      background: #bdc3c7;
      cursor: not-allowed;
    }

    .quick-view {
      background: #3498db;
      color: white;
    }

    .quick-view:hover {
      background: #2980b9;
      transform: translateY(-1px);
    }

    /* ===== Ù…ÙˆØ¯Ø§Ù„ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø³Ø±ÛŒØ¹ ===== */
    .quick-view-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.8);
      z-index: 10000;
      backdrop-filter: blur(5px);
    }

    .modal-content {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      padding: 30px;
      border-radius: 15px;
      max-width: 500px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .modal-close {
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: #666;
    }

    .modal-close:hover {
      color: #333;
    }

    .modal-product-image {
      width: 100%;
      max-height: 300px;
      object-fit: cover;
      border-radius: 10px;
      margin-bottom: 20px;
    }

    .modal-product-info h2 {
      margin-bottom: 10px;
      color: #333;
    }

    .modal-product-details {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      margin: 20px 0;
    }

    .detail-item {
      padding: 10px;
      background: #f8f9fa;
      border-radius: 8px;
    }

    .detail-label {
      font-weight: bold;
      color: #666;
      font-size: 12px;
    }

    .detail-value {
      color: #333;
      margin-top: 5px;
    }

    * {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  direction: rtl;
}

header {
  background-color: #fff;
  border-bottom: 1px solid #ddd;
  position: relative;
  z-index: 1000;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  display: flex;
  align-items: center;
  padding: 10px 20px;
  justify-content: space-between;
}

/* Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ */
.main-nav {
  display: flex;
  gap: 20px;
  flex: 1;
  justify-content: center;
}

.main-nav a {
  text-decoration: none;
  color: #333;
  font-weight: 600;
  font-size: 14px;
  padding: 6px 8px;
  border-radius: 4px;
  transition: background-color 0.3s, color 0.3s;
}

.main-nav a:hover {
  background-color: #f2f2f2;
  color: #000;
}

/* Ø¢ÛŒÚ©ÙˆÙ†â€ŒÙ‡Ø§ Ùˆ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ */
.icons-group {
  display: flex;
  align-items: center;
  gap: 15px;
}

/* Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ Ùˆ Ø¢ÛŒÚ©ÙˆÙ†â€ŒÙ‡Ø§ */
.icon-button,
#search-toggle,
#hamburger {
  background: none;
  border: none;
  cursor: pointer;
  padding: 6px;
  font-size: 24px;
  color: #333;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

.icon-button img,
#search-toggle img {
  width: 24px;
  height: 24px;
}


/* Ø±ÛŒØ³Ù¾Ø§Ù†Ø³ÛŒÙˆ Ø¨Ø±Ø§ÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ */
@media (max-width: 768px) {

  .main-nav {
    display: none;
  }

  #hamburger {
    display: flex;
  }

  .container {
    justify-content: space-between;
  }

  .search-popup {
    width: 90vw;
    right: 5vw;
  }
}
    /* Reset Ùˆ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù¾Ø§ÛŒÙ‡ */
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #fff;
      color: #111;
    }
    a {
      text-decoration: none;
      color: inherit;
    }
    header {
      border-bottom: 1px solid #ddd;
      padding: 10px 20px;
      position: relative;
      background: white;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
    }
    .container {
      display: flex;
      align-items: center;
      gap: 30px;
      flex-wrap: wrap;
      flex-grow: 1;
    }
    .logo img {
      width: 32px;
      height: 32px;
    }
    nav.main-nav {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
      flex-grow: 1;
    }
    nav.main-nav a {
      padding: 6px 10px;
      border-radius: 5px;
      transition: background-color 0.3s ease, color 0.3s ease;
      font-weight: 600;
      color: #333;
    }
    nav.main-nav a:hover {
      background-color: #0071e3;
      color: white;
    }


    /* Ø¯Ú©Ù…Ù‡ Ù…Ù†ÙˆÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ (Ø¯Ø± ØµÙˆØ±Øª Ù†ÛŒØ§Ø²) */
    #hamburger {
      display: none;
      font-size: 28px;
      background: none;
      border: none;
      cursor: pointer;
    }

    /* Ù¾Ù†Ø¬Ø±Ù‡ Ø¬Ø³ØªØ¬Ùˆ */
    .search-popup {
      position: absolute;
      top: 100%;
      right: 20px;
      background: white;
      border: 1px solid #ddd;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgb(0 0 0 / 0.15);
      padding: 10px;
      margin-top: 8px;
      display: none;
      z-index: 1000;
      width: 250px;
    }
    .search-popup input[type="text"] {
      width: calc(100% - 30px);
      padding: 6px 10px;
      font-size: 14px;
      border: 1px solid #ccc;
      border-radius: 5px;
      outline: none;
      direction: rtl;
    }
    .search-popup button#close-search {
      background: none;
      border: none;
      font-size: 22px;
      line-height: 1;
      cursor: pointer;
      color: #888;
      margin-left: 8px;
      padding: 0;
      vertical-align: middle;
      transition: color 0.3s ease;
    }
    .search-popup button#close-search:hover {
      color: #ff3b30;
    }

    /* ÙˆØ§Ú©Ù†Ø´â€ŒÚ¯Ø±Ø§ÛŒÛŒ Ø³Ø§Ø¯Ù‡ */
    @media (max-width: 768px) {
      nav.main-nav {
        display: none; /* Ù…ÛŒØªÙˆÙ†ÛŒ Ù…Ù†ÙˆÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ ÙØ¹Ø§Ù„ Ú©Ù†ÛŒ */
      }
      #hamburger {
        display: block;
      }
    }
             /* Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ */
.cart-button {
  position: relative;
  display: inline-block;
  background: linear-gradient(135deg, #ff5f6d, #ffc371);
  padding: 10px 15px;
  border-radius: 50px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  transition: transform 0.3s, box-shadow 0.3s;
  text-decoration: none;
  color: inherit;
}

.cart-button:hover {
  transform: scale(1.1);
  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.2);
}

.cart-button img {
  width: 24px;
  height: 24px;
  vertical-align: middle;
}
/* Ø§Ø³ØªØ§ÛŒÙ„ Ù…Ù†Ùˆ Ù‡Ù…Ø¨Ø±Ú¯Ø± */
.main-nav a {
  text-decoration: none;
  padding: 10px;
  color: white;
}

.hamburger {
  display: none;
  flex-direction: column;
  cursor: pointer;
  padding: 10px;
}

.hamburger div {
  width: 25px;
  height: 3px;
  background-color: black;
  margin: 4px 0;
}

.mobile-menu {
  display: none;
  flex-direction: column;
  background: #eee;
}

.mobile-menu a {
  padding: 10px;
  border-bottom: 1px solid #ccc;
  color: black;
  text-decoration: none;
}

.mobile-menu.show {
  display: flex;
}

@media (max-width: 768px) {
  .main-nav {
    display: none;
  }
  .hamburger {
    display: flex;
  }
}
/* Ø¯Ú©Ù…Ù‡ Ú©Ø§Ø± Ø¨Ø± */
 

  .icon-button {
    position: relative;
    display: inline-block;
    cursor: pointer;
  }

  #user-menu {
    position: absolute;
    top: 100%;
    right: 0;
    background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
    border: none;
    border-radius: 20px;
    width: 280px;
    box-shadow: 0 20px 40px rgba(0,0,0,0.15);
    display: none;
    flex-direction: column;
    z-index: 1000;
    font-family: Vazirmatn, sans-serif;
    margin-top: 10px;
    min-width: 280px;
    opacity: 1;
    visibility: visible;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255,255,255,0.2);
    animation: slideIn 0.3s ease-out;
  }

  @keyframes slideIn {
    from {
      opacity: 0;
      transform: translateY(-10px) scale(0.95);
    }
    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  #user-menu[aria-hidden="false"] {
    display: flex;
  }

  .welcome-msg {
    padding: 20px 25px;
    border-bottom: 1px solid rgba(102, 126, 234, 0.1);
    color: #333;
    font-weight: 700;
    font-size: 16px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border-radius: 20px 20px 0 0;
    text-align: center;
    position: relative;
    overflow: hidden;
  }

  .welcome-msg::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.1) 50%, transparent 70%);
    animation: shimmer 2s infinite;
  }

  @keyframes shimmer {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
  }

  .menu-item {
    padding: 15px 25px;
    text-decoration: none;
    color: #333;
    font-size: 14px;
    font-weight: 600;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 12px;
    position: relative;
    overflow: hidden;
  }

  .menu-item::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    height: 100%;
    width: 0;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    transition: width 0.3s ease;
    z-index: -1;
  }

  .menu-item:hover {
    color: white;
    transform: translateX(5px);
  }

  .menu-item:hover::before {
    width: 100%;
  }

  .menu-item:last-child {
    border-radius: 0 0 20px 20px;
  }

  /* Ø§Ø³ØªØ§ÛŒÙ„ Ø¯Ú©Ù…Ù‡ Ø²ÛŒØ¨Ø§ÛŒ ÙˆØ±ÙˆØ¯/Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… */
  .auth-button {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white !important;
    border-radius: 25px;
    padding: 12px 20px !important;
    margin: 10px 15px;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
    font-weight: 600;
  }

  .auth-button:hover {
    background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
    color: white !important;
  }

  .auth-icon {
    font-size: 16px;
  }

  .auth-text {
    font-size: 14px;
  }

  .menu-icon {
    font-size: 18px;
    opacity: 0.8;
    transition: all 0.3s ease;
  }

  .menu-item:hover .menu-icon {
    opacity: 1;
    transform: scale(1.1);
  }

  /* Ø¯Ú©Ù…Ù‡ Ú©Ø§Ø±Ø¨Ø± Ù…Ø¯Ø±Ù† */
  .user-button-modern {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 50%;
    padding: 8px;
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }

  .user-button-modern:hover {
    transform: scale(1.1);
    box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
  }

  .user-button-content {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .user-button-ripple {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    background: rgba(255, 255, 255, 0.3);
    border-radius: 50%;
    transform: translate(-50%, -50%);
    transition: all 0.6s ease;
  }

  .user-button-modern:active .user-button-ripple {
    width: 100px;
    height: 100px;
    opacity: 0;
  }

  .user-button-modern img,
  .user-button-modern span {
    filter: brightness(0) invert(1);
    z-index: 1;
    position: relative;
  }

  /* Ø¯Ú©Ù…Ù‡ Ø¬Ø³ØªØ¬Ùˆ Ù…Ø¯Ø±Ù† */
  .search-button-modern {
    background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
    border-radius: 50%;
    padding: 8px;
    box-shadow: 0 4px 15px rgba(39, 174, 96, 0.3);
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }

  .search-button-modern:hover {
    transform: scale(1.1);
    box-shadow: 0 6px 20px rgba(39, 174, 96, 0.4);
  }

  .search-button-content {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .search-button-ripple {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    background: rgba(255, 255, 255, 0.3);
    border-radius: 50%;
    transform: translate(-50%, -50%);
    transition: all 0.6s ease;
  }

  .search-button-modern:active .search-button-ripple {
    width: 100px;
    height: 100px;
    opacity: 0;
  }

  .search-button-modern img,
  .search-button-modern span {
    filter: brightness(0) invert(1);
    z-index: 1;
    position: relative;
  }
  .carousel-inner {
    height: 300px;
  }

  .carousel-inner img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  @media (max-width: 768px) {
    .carousel-inner {
      height: 200px;
    }
  }

  .carousel-control-prev-icon,
.carousel-control-next-icon {
  background-color: transparent;
  background-size: 100%, 100%;
  background-repeat: no-repeat;
}

.carousel-control-prev-icon {
  background-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23ffffff'><path d='M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0'/></svg>");
}

.carousel-control-next-icon {
  background-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23ffffff'><path d='M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708'/></svg>");
}

/* ØªØºÛŒÛŒØ± ØªÙ… Ø³Ø§ÛŒØª Ø¨Ù‡ Ø³Ø¨Ø² Ø³ÛŒØ¯ÛŒ */
body {
  background: linear-gradient(135deg, #b9f6ca 0%, #43e97b 100%) !important;
}

.modern-header {
  background: linear-gradient(135deg, #43e97b 0%, #00c853 100%) !important;
  border-bottom: 1px solid rgba(67,233,123,0.1) !important;
}
.modern-header.scrolled {
  background: rgba(67,233,123,0.95) !important;
}

.modern-logo span {
  background: linear-gradient(45deg, #fff, #b9f6ca) !important;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.modern-nav a,
.modern-nav a.active {
  background: rgba(67,233,123,0.2) !important;
  color: #fff !important;
}
.modern-nav a:hover {
  background: #38f9d7 !important;
  color: #fff !important;
}

.modern-cart-button {
  background: linear-gradient(135deg, #38f9d7 0%, #43e97b 100%) !important;
  color: #fff !important;
}
.modern-cart-button:hover {
  background: #00c853 !important;
}

.modern-search-btn {
  background: linear-gradient(135deg, #38f9d7 0%, #43e97b 100%) !important;
}
.modern-search-btn:hover {
  background: #00c853 !important;
}

.modern-user-btn {
  background: linear-gradient(135deg, #43e97b 0%, #00c853 100%) !important;
}
.modern-user-btn:hover {
  background: #38f9d7 !important;
}

.hero-section {
  background: linear-gradient(135deg, #43e97b 0%, #00c853 100%) !important;
}

.hero-btn.primary {
  background: linear-gradient(135deg, #38f9d7 0%, #43e97b 100%) !important;
  color: #fff !important;
}
.hero-btn.secondary {
  background: rgba(67,233,123,0.2) !important;
  color: #fff !important;
}

.features-section {
  background: #e0f7fa !important;
}
.feature-card {
  background: linear-gradient(135deg, #b9f6ca 0%, #e0f7fa 100%) !important;
  border-bottom: 2px solid #43e97b !important;
}
.feature-card:hover::before {
  background: linear-gradient(135deg, #43e97b 0%, #00c853 100%) !important;
}

.products-section {
  background: linear-gradient(135deg, #e0f7fa 0%, #b9f6ca 100%) !important;
}

.modern-apple-card {
  background: #e0f7fa !important;
  border-radius: 20px;
  box-shadow: 0 10px 30px rgba(67,233,123,0.08) !important;
}
.modern-apple-card:hover {
  box-shadow: 0 20px 40px rgba(67,233,123,0.15) !important;
}

.modern-card-price {
  color: #43e97b !important;
}

.modern-add-to-cart {
  background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%) !important;
  color: #fff !important;
}
.modern-add-to-cart:hover {
  background: #00c853 !important;
}

.modern-quick-view {
  background: linear-gradient(135deg, #38f9d7 0%, #43e97b 100%) !important;
  color: #fff !important;
}
.modern-quick-view:hover {
  background: #00c853 !important;
}

.newsletter-section {
  background: linear-gradient(135deg, #43e97b 0%, #00c853 100%) !important;
}
.newsletter-button {
  background: linear-gradient(135deg, #38f9d7 0%, #43e97b 100%) !important;
  color: #fff !important;
}
.newsletter-button:hover {
  background: #00c853 !important;
}

.modern-footer {
  background: linear-gradient(135deg, #00c853 0%, #43e97b 100%) !important;
}

.scroll-to-top {
  background: linear-gradient(135deg, #43e97b 0%, #00c853 100%) !important;
}
.scroll-to-top:hover {
  background: #38f9d7 !important;
}

 </style>
  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet">
<body>
  <!-- Ù…Ø±Ú©Ø² Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† -->
  <div class="user-notification-center" id="user-notification-center">
    <div class="user-notification-header">
      <h3>ğŸ”” Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§</h3>
      <button onclick="toggleUserNotifications()" style="background: none; border: none; color: white; font-size: 20px;">Ã—</button>
    </div>
    <div id="user-notification-list">
      <!-- Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø± Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
    </div>
  </div>

<!-- ===== HEADER STYLES ===== -->
<style>
/* Modern Header Styles */
.modern-header {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  backdrop-filter: blur(20px);
  border-bottom: 1px solid rgba(255,255,255,0.1);
  position: sticky;
  top: 0;
  z-index: 1000;
  box-shadow: 0 8px 32px rgba(0,0,0,0.1);
  transition: all 0.3s ease;
}

.modern-header.scrolled {
  background: rgba(255,255,255,0.95);
  backdrop-filter: blur(20px);
  box-shadow: 0 4px 20px rgba(0,0,0,0.1);
}

.modern-container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 0 20px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  height: 80px;
  position: relative;
}

/* Logo Styles */
.modern-logo {
  display: flex;
  align-items: center;
  gap: 12px;
  text-decoration: none;
  color: white;
  font-weight: 700;
  font-size: 24px;
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
}

.modern-logo::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
  transition: left 0.5s ease;
}

.modern-logo:hover::before {
  left: 100%;
}

.modern-logo img {
  width: 40px;
  height: 40px;
  border-radius: 12px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.2);
  transition: all 0.3s ease;
}

.modern-logo:hover img {
  transform: scale(1.1) rotate(5deg);
  box-shadow: 0 8px 25px rgba(0,0,0,0.3);
}

.modern-logo span {
  background: linear-gradient(45deg, #fff, #f0f0f0);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  font-weight: 800;
}

/* Navigation Styles */
.modern-nav {
  display: flex;
  align-items: center;
  gap: 8px;
  flex: 1;
  justify-content: center;
  margin: 0 40px;
}

.modern-nav a {
  position: relative;
  padding: 12px 20px;
  color: white;
  text-decoration: none;
  font-weight: 600;
  font-size: 14px;
  border-radius: 25px;
  transition: all 0.3s ease;
  overflow: hidden;
  white-space: nowrap;
  display: flex;
  align-items: center;
  gap: 8px;
}

.modern-nav a::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(255,255,255,0.1);
  transform: scaleX(0);
  transform-origin: right;
  transition: transform 0.3s ease;
  border-radius: 25px;
}

.modern-nav a:hover::before {
  transform: scaleX(1);
  transform-origin: left;
}

.modern-nav a:hover {
  color: white;
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(0,0,0,0.2);
}

.modern-nav a.active {
  background: rgba(255,255,255,0.2);
  backdrop-filter: blur(10px);
}

/* Cart Button */
.modern-cart-button {
  background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
  color: white;
  padding: 12px 20px;
  border-radius: 25px;
  text-decoration: none;
  font-weight: 600;
  font-size: 14px;
  display: flex;
  align-items: center;
  gap: 8px;
  transition: all 0.3s ease;
  box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
  position: relative;
  overflow: hidden;
}

.modern-cart-button::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
  transition: left 0.5s ease;
}

.modern-cart-button:hover::before {
  left: 100%;
}

.modern-cart-button:hover {
  transform: translateY(-3px) scale(1.05);
  box-shadow: 0 8px 25px rgba(255, 107, 107, 0.4);
}

/* Action Buttons */
.modern-actions {
  display: flex;
  align-items: center;
  gap: 15px;
}

.modern-search-btn {
  background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
  border: none;
  border-radius: 50%;
  width: 45px;
  height: 45px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 4px 15px rgba(39, 174, 96, 0.3);
  position: relative;
  overflow: hidden;
}

.modern-search-btn::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  background: rgba(255,255,255,0.3);
  border-radius: 50%;
  transform: translate(-50%, -50%);
  transition: all 0.6s ease;
}

.modern-search-btn:active::before {
  width: 100px;
  height: 100px;
  opacity: 0;
}

.modern-search-btn:hover {
  transform: scale(1.1);
  box-shadow: 0 8px 25px rgba(39, 174, 96, 0.4);
}

.modern-search-btn img {
  width: 20px;
  height: 20px;
  filter: brightness(0) invert(1);
  transition: all 0.3s ease;
}

.modern-search-btn:hover img {
  transform: scale(1.2);
}

.modern-user-btn {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border: none;
  border-radius: 50%;
  width: 45px;
  height: 45px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
  position: relative;
  overflow: hidden;
}

.modern-user-btn::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  background: rgba(255,255,255,0.3);
  border-radius: 50%;
  transform: translate(-50%, -50%);
  transition: all 0.6s ease;
}

.modern-user-btn:active::before {
  width: 100px;
  height: 100px;
  opacity: 0;
}

.modern-user-btn:hover {
  transform: scale(1.1);
  box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
}

.modern-user-btn img {
  width: 20px;
  height: 20px;
  filter: brightness(0) invert(1);
  transition: all 0.3s ease;
}

.modern-user-btn:hover img {
  transform: scale(1.2);
}

/* Mobile Menu */
.modern-hamburger {
  display: none;
  flex-direction: column;
  gap: 4px;
  background: none;
  border: none;
  cursor: pointer;
  padding: 8px;
  border-radius: 8px;
  transition: all 0.3s ease;
}

.modern-hamburger span {
  width: 25px;
  height: 3px;
  background: white;
  border-radius: 2px;
  transition: all 0.3s ease;
}

.modern-hamburger:hover span {
  background: #f0f0f0;
}

.modern-hamburger.active span:nth-child(1) {
  transform: rotate(45deg) translate(6px, 6px);
}

.modern-hamburger.active span:nth-child(2) {
  opacity: 0;
}

.modern-hamburger.active span:nth-child(3) {
  transform: rotate(-45deg) translate(6px, -6px);
}

/* Mobile Menu */
.modern-mobile-menu {
  display: none;
  position: fixed;
  top: 80px;
  left: 0;
  right: 0;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  backdrop-filter: blur(20px);
  padding: 20px;
  box-shadow: 0 8px 32px rgba(0,0,0,0.2);
  z-index: 999;
  animation: slideDown 0.3s ease-out;
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.modern-mobile-menu a {
  display: block;
  padding: 15px 20px;
  color: white;
  text-decoration: none;
  font-weight: 600;
  border-radius: 12px;
  margin-bottom: 8px;
  transition: all 0.3s ease;
  background: rgba(255,255,255,0.1);
}

.modern-mobile-menu a:hover {
  background: rgba(255,255,255,0.2);
  transform: translateX(10px);
}

/* Responsive Design */
@media (max-width: 1024px) {
  .modern-nav {
    display: none;
  }
  
  .modern-hamburger {
    display: flex;
  }
  
  .modern-container {
    padding: 0 15px;
  }
}

@media (max-width: 768px) {
  .modern-container {
    height: 70px;
  }
  
  .modern-logo {
    font-size: 20px;
  }
  
  .modern-logo img {
    width: 35px;
    height: 35px;
  }
  
  .modern-actions {
    gap: 10px;
  }
  
  .modern-search-btn,
  .modern-user-btn {
    width: 40px;
    height: 40px;
  }
}

@media (max-width: 480px) {
  .modern-container {
    padding: 0 10px;
  }
  
  .modern-logo span {
    display: none;
  }
  
  .modern-actions {
    gap: 8px;
  }
}

/* Scroll Effect */
.modern-header.scrolled .modern-nav a {
  color: #333;
}

.modern-header.scrolled .modern-logo {
  color: #333;
}

.modern-header.scrolled .modern-logo span {
  background: linear-gradient(45deg, #333, #666);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}
</style>

<header class="modern-header" id="modernHeader">
  <div class="modern-container">
    
    <!-- Ù„ÙˆÚ¯Ùˆ -->
    <a href="kar-aval.html" class="modern-logo" aria-label="Ø®Ø§Ù†Ù‡">
      <img src="home.png" alt="Ø®Ø§Ù†Ù‡">
      <span>Ú©Ø§Ø± Ø¢ÙˆØ§Ù„</span>
    </a>
    
    <!-- Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ -->
    <nav class="modern-nav" id="modernNav" aria-label="Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ">
      <a href="cart.html" class="modern-cart-button">
        ğŸ›’ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯
      </a>
      <a href="kar-aval.html" class="nav-link" id="menu-all-products">ØªÙ…Ø§Ù…â€ŒÙ…Ø­ØµÙˆÙ„Ø§Øª</a>
      <a href="category.html?cat=Ú©Ù„Ø§Ù‡" class="nav-link" id="menu-hats">Ú©Ù„Ø§Ù‡</a>
      <a href="category.html?cat=Ø´Ù„ÙˆØ§Ø±Ú©" class="nav-link" id="menu-shorts">Ø´Ù„ÙˆØ§Ø±Ú©</a>
      <a href="category.html?cat=Ø´Ù„ÙˆØ§Ø±" class="nav-link" id="menu-pants">Ø´Ù„ÙˆØ§Ø±</a>
      <a href="category.html?cat=ØªÛŒØ´Ø±Øª" class="nav-link" id="menu-tshirts">ØªÛŒØ´Ø±Øª</a>
      <a href="about.html" class="nav-link" id="menu-trust">Ø§Ø¹ØªÙ…Ø§Ø¯</a>
      <a href="badges.html" class="nav-link" id="menu-badges">Ù†Ø´Ø§Ù†â€ŒÙ‡Ø§</a>
      <a href="contact.html" class="nav-link" id="menu-contact">Ø®Ø±ÛŒØ¯â€ŒØ­Ø¶ÙˆØ±ÛŒ</a>
      <a href="contact.html" class="nav-link" id="menu-contact2">ØªÙ…Ø§Ø³â€ŒØ¨Ø§Ù…Ø§</a>
      <a href="admin.html" class="nav-link" id="menu-admin">Ø§Ø¯Ù…ÛŒÙ†</a>
    </nav>
    
    <!-- Ø¯Ú©Ù…Ù‡ Ù‡Ù…Ø¨Ø±Ú¯Ø± -->
    <button class="modern-hamburger" id="modernHamburger" aria-label="Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ù…Ù†Ùˆ" type="button">
      <span></span>
      <span></span>
      <span></span>
    </button>
    
    <!-- Ø¢ÛŒÚ©ÙˆÙ†â€ŒÙ‡Ø§ Ùˆ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ -->
    <div class="modern-actions">
      
      <!-- Ø¯Ú©Ù…Ù‡ Ø¬Ø³ØªØ¬Ùˆ -->
      <button id="search-toggle" class="modern-search-btn" aria-label="Ø¬Ø³ØªØ¬Ùˆ">
        <img src="search.png" alt="Ø¬Ø³ØªØ¬Ùˆ" onerror="this.style.display='none'; this.nextSibling.style.display='inline';">
        <span style="display:none; font-size: 18px;">ğŸ”</span>
      </button>
      
      <!-- Ø¯Ú©Ù…Ù‡ Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§ -->
      <button class="modern-search-btn" onclick="toggleUserNotifications()" style="background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%); position: relative;">
        <span style="font-size: 18px;">ğŸ””</span>
        <div class="notification-badge" id="notification-badge" style="display: none;">0</div>
      </button>
      
      <!-- Ø¯Ú©Ù…Ù‡ Ú©Ø§Ø±Ø¨Ø± -->
      <button class="modern-user-btn" aria-label="Ú©Ø§Ø±Ø¨Ø±" id="user-button" type="button">
        <img src="user.png" alt="Ú©Ø§Ø±Ø¨Ø±" onerror="this.style.display='none'; this.nextSibling.style.display='inline';" />
        <span style="display:none; font-size: 20px;">ğŸ‘¤</span>
      </button>
      
    </div>
  </div>
  
  <!-- Ù…Ù†ÙˆÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ -->
  <nav class="modern-mobile-menu" id="modernMobileMenu" aria-label="Ù…Ù†ÙˆÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„">
    <a href="cart.html">ğŸ›’ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯</a>
    <a href="kar-aval.html" id="mobile-menu-all-products">ØªÙ…Ø§Ù…â€ŒÙ…Ø­ØµÙˆÙ„Ø§Øª</a>
    <a href="category.html?cat=Ú©Ù„Ø§Ù‡" id="mobile-menu-hats">Ú©Ù„Ø§Ù‡</a>
    <a href="category.html?cat=Ø´Ù„ÙˆØ§Ø±Ú©" id="mobile-menu-shorts">Ø´Ù„ÙˆØ§Ø±Ú©</a>
    <a href="category.html?cat=Ø´Ù„ÙˆØ§Ø±" id="mobile-menu-pants">Ø´Ù„ÙˆØ§Ø±</a>
    <a href="category.html?cat=ØªÛŒØ´Ø±Øª" id="mobile-menu-tshirts">ØªÛŒØ´Ø±Øª</a>
    <a href="about.html" id="mobile-menu-trust">Ø§Ø¹ØªÙ…Ø§Ø¯</a>
    <a href="badges.html" id="mobile-menu-badges">Ù†Ø´Ø§Ù†â€ŒÙ‡Ø§</a>
    <a href="contact.html" id="mobile-menu-contact">Ø®Ø±ÛŒØ¯â€ŒØ­Ø¶ÙˆØ±ÛŒ</a>
    <a href="contact.html" id="mobile-menu-contact2">ØªÙ…Ø§Ø³â€ŒØ¨Ø§Ù…Ø§</a>
    <a href="admin.html" id="mobile-menu-admin">Ø§Ø¯Ù…ÛŒÙ†</a>
  </nav>
  
  <!-- Ù…Ù†ÙˆÛŒ Ú©Ø´ÙˆÛŒÛŒ Ú©Ø§Ø±Ø¨Ø± -->
  <div id="user-menu" class="user-menu" style="display: none;">
    <div class="welcome-msg" id="welcome-msg">Ø³Ù„Ø§Ù…ØŒ Ú©Ø§Ø±Ø¨Ø± Ø¹Ø²ÛŒØ²!</div>
    <div id="guest-actions">
      <a href="auth.html" class="menu-item auth-button">
        <span class="auth-icon">ğŸ”</span>
        <span class="auth-text">ÙˆØ±ÙˆØ¯ / Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…</span>
      </a>
    </div>
    <div id="user-actions" style="display: none;">
      <a href="profile.html" class="menu-item">
        <span class="menu-icon">ğŸ‘¤</span>
        <span>Ù¾Ø±ÙˆÙØ§ÛŒÙ„</span>
      </a>
      <a href="#" class="menu-item" onclick="logout()">
        <span class="menu-icon">ğŸšª</span>
        <span>Ø®Ø±ÙˆØ¬</span>
      </a>
    </div>
  </div>
  
  <!-- Ù¾Ù†Ø¬Ø±Ù‡ Ø¬Ø³ØªØ¬Ùˆ -->
  <div class="search-popup" id="searchPopup" role="search">
    <div class="search-box">
      <span class="search-title">Ø¬Ø³ØªØ¬ÙˆÛŒ Ù…Ø­ØµÙˆÙ„Ø§Øª</span>
      <button type="button" id="close-search" aria-label="Ø¨Ø³ØªÙ† Ø¬Ø³ØªØ¬Ùˆ">&times;</button>
      <input type="text" id="search-input" placeholder="Ù†Ø§Ù… Ù…Ø­ØµÙˆÙ„ ÛŒØ§ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ..." aria-label="Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ù…Ø­ØµÙˆÙ„Ø§Øª" autocomplete="off" />
      <div class="search-results" id="searchResults"></div>
    </div>
  </div>
  
</header>
<!-- ===== MODERN SITE STYLES ===== -->
<style>
/* Modern Site Styles */
body {
  background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
  min-height: 100vh;
  font-family: 'Vazirmatn', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

/* Hero Section */
.hero-section {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  padding: 80px 0 60px;
  position: relative;
  overflow: hidden;
  margin-bottom: 60px;
}

.hero-section::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="50" cy="50" r="1" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
  opacity: 0.3;
}

.hero-content {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 20px;
  text-align: center;
  position: relative;
  z-index: 2;
}

.hero-title {
  font-size: 3.5rem;
  font-weight: 800;
  color: white;
  margin-bottom: 20px;
  text-shadow: 0 4px 20px rgba(0,0,0,0.3);
  animation: fadeInUp 1s ease-out;
}

.hero-subtitle {
  font-size: 1.3rem;
  color: rgba(255,255,255,0.9);
  margin-bottom: 40px;
  line-height: 1.6;
  animation: fadeInUp 1s ease-out 0.2s both;
}

.hero-buttons {
  display: flex;
  gap: 20px;
  justify-content: center;
  flex-wrap: wrap;
  animation: fadeInUp 1s ease-out 0.4s both;
}

.hero-btn {
  padding: 15px 30px;
  border-radius: 50px;
  font-weight: 600;
  font-size: 1.1rem;
  text-decoration: none;
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
}

.hero-btn.primary {
  background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
  color: white;
  box-shadow: 0 8px 25px rgba(255, 107, 107, 0.4);
}

.hero-btn.secondary {
  background: rgba(255,255,255,0.2);
  color: white;
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255,255,255,0.3);
}

.hero-btn:hover {
  transform: translateY(-3px);
  box-shadow: 0 12px 35px rgba(0,0,0,0.2);
}

/* Modern Carousel */
.modern-carousel {
  background: white;
  border-radius: 20px;
  box-shadow: 0 20px 40px rgba(0,0,0,0.1);
  margin: 40px auto;
  max-width: 1200px;
  overflow: hidden;
  position: relative;
}

.carousel-inner {
  height: 400px;
  position: relative;
}

.carousel-item {
  height: 100%;
  position: relative;
  overflow: hidden;
}

.carousel-item img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.3s ease;
}

.carousel-item:hover img {
  transform: scale(1.05);
}

.carousel-caption {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  background: linear-gradient(transparent, rgba(0,0,0,0.8));
  color: white;
  padding: 40px 30px 30px;
  text-align: center;
}

.carousel-caption h3 {
  font-size: 2rem;
  font-weight: 700;
  margin-bottom: 10px;
}

.carousel-caption p {
  font-size: 1.1rem;
  opacity: 0.9;
}

.carousel-control-prev,
.carousel-control-next {
  width: 60px;
  height: 60px;
  background: rgba(255,255,255,0.9);
  border-radius: 50%;
  border: none;
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  z-index: 10;
  transition: all 0.3s ease;
  backdrop-filter: blur(10px);
}

.carousel-control-prev {
  left: 20px;
}

.carousel-control-next {
  right: 20px;
}

.carousel-control-prev:hover,
.carousel-control-next:hover {
  background: white;
  transform: translateY(-50%) scale(1.1);
  box-shadow: 0 8px 25px rgba(0,0,0,0.2);
}

.carousel-control-prev-icon,
.carousel-control-next-icon {
  filter: brightness(0) invert(1);
  width: 30px;
  height: 30px;
}

/* Features Section */
.features-section {
  padding: 80px 0;
  background: white;
  margin: 60px 0;
}

.features-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 20px;
}

.features-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 40px;
  margin-top: 60px;
}

.feature-card {
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
  border-radius: 20px;
  padding: 40px 30px;
  text-align: center;
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
}

.feature-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  transform: scaleX(0);
  transition: transform 0.3s ease;
}

.feature-card:hover::before {
  transform: scaleX(1);
}

.feature-card:hover {
  transform: translateY(-10px);
  box-shadow: 0 20px 40px rgba(0,0,0,0.1);
}

.feature-icon {
  font-size: 3rem;
  margin-bottom: 20px;
  display: block;
}

.feature-title {
  font-size: 1.5rem;
  font-weight: 700;
  color: #333;
  margin-bottom: 15px;
}

.feature-description {
  color: #666;
  line-height: 1.6;
}

/* Products Section */
.products-section {
  padding: 80px 0;
  background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
  min-height: 100vh;
}

.products-container {
  max-width: 1600px;
  margin: 0 auto;
  padding: 0 20px;
}

.section-header {
  text-align: center;
  margin-bottom: 60px;
}

.section-title {
  font-size: 2.5rem;
  font-weight: 800;
  color: #333;
  margin-bottom: 20px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.section-subtitle {
  font-size: 1.2rem;
  color: #666;
  max-width: 600px;
  margin: 0 auto;
  line-height: 1.6;
}

/* Product Controls */
.products-controls {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 40px;
  flex-wrap: wrap;
  gap: 20px;
  background: white;
  padding: 20px;
  border-radius: 15px;
  box-shadow: 0 5px 20px rgba(0,0,0,0.1);
}

.products-filters {
  display: flex;
  gap: 15px;
  flex-wrap: wrap;
  align-items: center;
}

.filter-group {
  display: flex;
  align-items: center;
  gap: 8px;
}

.filter-group label {
  font-weight: 600;
  color: #333;
  font-size: 14px;
}

.filter-group select,
.filter-group input {
  padding: 8px 12px;
  border: 2px solid #e1e5e9;
  border-radius: 8px;
  font-size: 14px;
  background: #f8f9fa;
  transition: border-color 0.3s ease;
}

.filter-group select:focus,
.filter-group input:focus {
  outline: none;
  border-color: #667eea;
  background: white;
}

.layout-controls {
  display: flex;
  gap: 10px;
  align-items: center;
}

.layout-btn {
  padding: 8px 12px;
  border: 2px solid #e1e5e9;
  background: white;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s ease;
  font-size: 14px;
  font-weight: 600;
}

.layout-btn.active {
  background: #667eea;
  color: white;
  border-color: #667eea;
}

.layout-btn:hover {
  border-color: #667eea;
  background: #f8f9fa;
}

.layout-btn.active:hover {
  background: #5a6fd8;
}

/* Enhanced Product Cards */
.modern-cards-container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap: 30px;
  padding: 40px 0;
}

.modern-cards-container.grid-2 {
  grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
}

.modern-cards-container.grid-3 {
  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
}

.modern-cards-container.grid-4 {
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
}

.modern-cards-container.list-view {
  grid-template-columns: 1fr;
  gap: 20px;
}

.modern-apple-card {
  background: white;
  border-radius: 20px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.1);
  overflow: hidden;
  transition: all 0.3s ease;
  position: relative;
  cursor: pointer;
}

.modern-apple-card:hover {
  transform: translateY(-10px);
  box-shadow: 0 20px 40px rgba(0,0,0,0.15);
}

.modern-apple-card.list-view {
  display: flex;
  align-items: center;
  padding: 20px;
}

.modern-apple-card.list-view img {
  width: 200px;
  height: 150px;
  margin-right: 20px;
  flex-shrink: 0;
}

.modern-apple-card img {
  width: 100%;
  height: 250px;
  object-fit: cover;
  transition: transform 0.3s ease;
}

.modern-apple-card:hover img {
  transform: scale(1.05);
}

.modern-card-content {
  padding: 25px;
}

.modern-card-content.list-view {
  flex: 1;
  padding: 0;
}

.modern-card-title {
  font-size: 1.3rem;
  font-weight: 700;
  color: #333;
  margin-bottom: 10px;
}

.modern-card-price {
  font-size: 1.5rem;
  font-weight: 800;
  color: #667eea;
  margin-bottom: 15px;
}

.modern-card-description {
  color: #666;
  line-height: 1.6;
  margin-bottom: 20px;
}

.modern-card-actions {
  display: flex;
  gap: 10px;
}

.modern-add-to-cart {
  flex: 1;
  padding: 12px 20px;
  background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
  color: white;
  border: none;
  border-radius: 10px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
}

.modern-add-to-cart:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(39, 174, 96, 0.4);
}

.modern-quick-view {
  padding: 12px 20px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border: none;
  border-radius: 10px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
}

.modern-quick-view:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
}

/* Product Stats */
.products-stats {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 30px;
  padding: 15px 20px;
  background: white;
  border-radius: 10px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

.stat-item {
  text-align: center;
}

.stat-number {
  font-size: 1.5rem;
  font-weight: 800;
  color: #667eea;
}

.stat-label {
  font-size: 0.9rem;
  color: #666;
  margin-top: 5px;
}

/* Responsive Design */
@media (max-width: 768px) {
  .products-controls {
    flex-direction: column;
    align-items: stretch;
  }
  
  .products-filters {
    justify-content: center;
  }
  
  .layout-controls {
    justify-content: center;
  }
  
  .modern-cards-container {
    grid-template-columns: 1fr;
  }
  
  .modern-apple-card.list-view {
    flex-direction: column;
    text-align: center;
  }
  
  .modern-apple-card.list-view img {
    margin-right: 0;
    margin-bottom: 15px;
  }
  
  .products-stats {
    flex-wrap: wrap;
    gap: 15px;
  }
}

/* Newsletter Section */
.newsletter-section {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  padding: 80px 0;
  margin: 60px 0;
  position: relative;
  overflow: hidden;
}

.newsletter-section::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="newsletter" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="50" cy="50" r="1" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="100" height="100" fill="url(%23newsletter)"/></svg>');
  opacity: 0.3;
}

.newsletter-container {
  max-width: 800px;
  margin: 0 auto;
  padding: 0 20px;
  text-align: center;
  position: relative;
  z-index: 2;
}

.newsletter-title {
  font-size: 2.5rem;
  font-weight: 800;
  color: white;
  margin-bottom: 20px;
}

.newsletter-subtitle {
  font-size: 1.2rem;
  color: rgba(255,255,255,0.9);
  margin-bottom: 40px;
}

.newsletter-form {
  display: flex;
  gap: 15px;
  max-width: 500px;
  margin: 0 auto;
  flex-wrap: wrap;
}

.newsletter-input {
  flex: 1;
  min-width: 250px;
  padding: 15px 20px;
  border: none;
  border-radius: 50px;
  font-size: 1rem;
  outline: none;
  box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

.newsletter-button {
  padding: 15px 30px;
  background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
  color: white;
  border: none;
  border-radius: 50px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
}

.newsletter-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(255, 107, 107, 0.4);
}

/* Footer */
.modern-footer {
  background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
  color: white;
  padding: 60px 0 30px;
  margin-top: 80px;
}

.footer-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 20px;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 40px;
}

.footer-section h3 {
  font-size: 1.3rem;
  font-weight: 700;
  margin-bottom: 20px;
  color: #fff;
}

.footer-section p,
.footer-section a {
  color: rgba(255,255,255,0.8);
  line-height: 1.6;
  text-decoration: none;
  transition: color 0.3s ease;
}

.footer-section a:hover {
  color: white;
}

.footer-bottom {
  text-align: center;
  padding-top: 30px;
  margin-top: 30px;
  border-top: 1px solid rgba(255,255,255,0.1);
  color: rgba(255,255,255,0.6);
}

/* Animations */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideInLeft {
  from {
    opacity: 0;
    transform: translateX(-30px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes slideInRight {
  from {
    opacity: 0;
    transform: translateX(30px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

/* Responsive Design */
@media (max-width: 768px) {
  .hero-title {
    font-size: 2.5rem;
  }
  
  .hero-subtitle {
    font-size: 1.1rem;
  }
  
  .hero-buttons {
    flex-direction: column;
    align-items: center;
  }
  
  .carousel-inner {
    height: 300px;
  }
  
  .section-title {
    font-size: 2rem;
  }
  
  .modern-cards-container {
    grid-template-columns: 1fr;
    gap: 20px;
  }
  
  .newsletter-form {
    flex-direction: column;
  }
  
  .footer-container {
    grid-template-columns: 1fr;
    text-align: center;
  }
}

/* Loading Animation */
.loading-spinner {
  display: inline-block;
  width: 20px;
  height: 20px;
  border: 3px solid rgba(255,255,255,0.3);
  border-radius: 50%;
  border-top-color: white;
  animation: spin 1s ease-in-out infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* Toast Notifications */
.toast-container {
  position: fixed;
  top: 20px;
  right: 20px;
  z-index: 10000;
}

.toast {
  background: white;
  border-radius: 10px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.2);
  padding: 15px 20px;
  margin-bottom: 10px;
  display: flex;
  align-items: center;
  gap: 10px;
  animation: slideInRight 0.3s ease-out;
}

.toast.success {
  border-left: 4px solid #27ae60;
}

.toast.error {
  border-left: 4px solid #e74c3c;
}

.toast.info {
  border-left: 4px solid #3498db;
}

/* Scroll to Top Button */
.scroll-to-top {
  position: fixed;
  bottom: 30px;
  right: 30px;
  width: 50px;
  height: 50px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border: none;
  border-radius: 50%;
  cursor: pointer;
  display: none;
  align-items: center;
  justify-content: center;
  font-size: 20px;
  box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
  transition: all 0.3s ease;
  z-index: 1000;
}

.scroll-to-top:hover {
  transform: translateY(-3px);
  box-shadow: 0 12px 35px rgba(102, 126, 234, 0.5);
}

.scroll-to-top.show {
  display: flex;
}
</style>

<!-- Hero Section -->
<section class="hero-section">
  <div class="hero-content">
    <h1 class="hero-title">ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ú©Ø§Ø± Ø¢ÙˆØ§Ù„</h1>
    <p class="hero-subtitle">Ø¨Ù‡ØªØ±ÛŒÙ† Ù…Ø­ØµÙˆÙ„Ø§Øª Ø¨Ø§ Ú©ÛŒÙÛŒØª ØªØ±ÛŒÙ† Ù‚ÛŒÙ…Øªâ€ŒÙ‡Ø§</p>
    <div class="hero-buttons">
      <a href="#products" class="hero-btn primary">Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù…Ø­ØµÙˆÙ„Ø§Øª</a>
      <a href="cart.html" class="hero-btn secondary">Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯</a>
    </div>
  </div>
</section>

<!-- Modern Carousel -->
<div class="modern-carousel">
  <div id="carouselExample" class="carousel slide" data-bs-ride="carousel" data-bs-interval="3000">
    <div class="carousel-inner" id="carousel-inner">
      <!-- Ø§Ø³Ù„Ø§ÛŒØ¯Ù‡Ø§ Ø¨Ù‡ ØµÙˆØ±Øª Ø¯Ø§ÛŒÙ†Ø§Ù…ÛŒÚ© Ø¨Ø§ JS Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒØ´Ù† -->
    </div>

    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
      <span class="carousel-control-prev-icon"></span>
      <span class="visually-hidden">Ù‚Ø¨Ù„ÛŒ</span>
    </button>

    <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
      <span class="carousel-control-next-icon"></span>
      <span class="visually-hidden">Ø¨Ø¹Ø¯ÛŒ</span>
    </button>
  </div>
</div>
Ø¨Ø¨

































<!-- Features Section -->
<section class="features-section">
  <div class="features-container">
    <div class="section-header">
      <h2 class="section-title">Ú†Ø±Ø§ Ú©Ø§Ø± Ø¢ÙˆØ§Ù„ØŸ</h2>
      <p class="section-subtitle">Ù…Ø§ Ø¨Ù‡ØªØ±ÛŒÙ† Ø®Ø¯Ù…Ø§Øª Ø±Ø§ Ø¨Ø§ Ø¨Ø§Ù„Ø§ØªØ±ÛŒÙ† Ú©ÛŒÙÛŒØª Ø§Ø±Ø§Ø¦Ù‡ Ù…ÛŒâ€ŒØ¯Ù‡ÛŒÙ…</p>
    </div>
    
    <div class="features-grid">
      <div class="feature-card">
        <span class="feature-icon">ğŸšš</span>
        <h3 class="feature-title">Ø§Ø±Ø³Ø§Ù„ Ø±Ø§ÛŒÚ¯Ø§Ù†</h3>
        <p class="feature-description">Ø¨Ø±Ø§ÛŒ Ø®Ø±ÛŒØ¯Ù‡Ø§ÛŒ Ø¨Ø§Ù„Ø§ÛŒ 500 Ù‡Ø²Ø§Ø± ØªÙˆÙ…Ø§Ù†ØŒ Ø§Ø±Ø³Ø§Ù„ Ú©Ø§Ù…Ù„Ø§Ù‹ Ø±Ø§ÛŒÚ¯Ø§Ù†</p>
      </div>
      
      <div class="feature-card">
        <span class="feature-icon">ğŸ›¡ï¸</span>
        <h3 class="feature-title">Ø¶Ù…Ø§Ù†Øª Ú©ÛŒÙÛŒØª</h3>
        <p class="feature-description">ØªÙ…Ø§Ù… Ù…Ø­ØµÙˆÙ„Ø§Øª Ù…Ø§ Ø¯Ø§Ø±Ø§ÛŒ Ø¶Ù…Ø§Ù†Øª Ø§ØµØ§Ù„Øª Ùˆ Ú©ÛŒÙÛŒØª Ù‡Ø³ØªÙ†Ø¯</p>
      </div>
      
      <div class="feature-card">
        <span class="feature-icon">ğŸ’</span>
        <h3 class="feature-title">Ø¨Ù‡ØªØ±ÛŒÙ† Ù‚ÛŒÙ…Øª</h3>
        <p class="feature-description">Ù‚ÛŒÙ…Øªâ€ŒÙ‡Ø§ÛŒ Ø±Ù‚Ø§Ø¨ØªÛŒ Ùˆ ØªØ®ÙÛŒÙâ€ŒÙ‡Ø§ÛŒ ÙˆÛŒÚ˜Ù‡ Ø¨Ø±Ø§ÛŒ Ù…Ø´ØªØ±ÛŒØ§Ù†</p>
      </div>
      
      <div class="feature-card">
        <span class="feature-icon">ğŸ¯</span>
        <h3 class="feature-title">Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ 24/7</h3>
        <p class="feature-description">Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø´Ø¨Ø§Ù†Ù‡â€ŒØ±ÙˆØ²ÛŒ Ø¨Ø±Ø§ÛŒ Ù¾Ø§Ø³Ø®Ú¯ÙˆÛŒÛŒ Ø¨Ù‡ Ø³ÙˆØ§Ù„Ø§Øª Ø´Ù…Ø§</p>
      </div>
    </div>
  </div>
</section>

<!-- Products Section -->
<section class="products-section" id="products">
  <div class="products-container">
    <div class="section-header">
      <h2 class="section-title">Ù…Ø­ØµÙˆÙ„Ø§Øª Ù…Ø§</h2>
      <p class="section-subtitle">Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ú©Ø§Ù…Ù„ÛŒ Ø§Ø² Ø¨Ù‡ØªØ±ÛŒÙ† Ù…Ø­ØµÙˆÙ„Ø§Øª Ø¨Ø§ Ú©ÛŒÙÛŒØª</p>
    </div>
    
    <!-- Product Stats -->
    <div class="products-stats" id="products-stats">
      <div class="stat-item">
        <div class="stat-number" id="total-products">0</div>
        <div class="stat-label">Ú©Ù„ Ù…Ø­ØµÙˆÙ„Ø§Øª</div>
      </div>
      <div class="stat-item">
        <div class="stat-number" id="available-products">0</div>
        <div class="stat-label">Ù…ÙˆØ¬ÙˆØ¯</div>
      </div>
      <div class="stat-item">
        <div class="stat-number" id="discount-products">0</div>
        <div class="stat-label">ØªØ®ÙÛŒÙ Ø¯Ø§Ø±</div>
      </div>
      <div class="stat-item">
        <div class="stat-number" id="new-products">0</div>
        <div class="stat-label">Ù…Ø­ØµÙˆÙ„Ø§Øª Ø¬Ø¯ÛŒØ¯</div>
      </div>
    </div>
    
    <!-- Product Controls -->
    <div class="products-controls">
      <div class="products-filters">
        <div class="filter-group">
          <label for="category-filter">Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ:</label>
          <input type="text" id="category-filter" placeholder="Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ..." />
        </div>
        
        <div class="filter-group">
          <label for="price-filter">Ù‚ÛŒÙ…Øª:</label>
          <select id="price-filter">
            <option value="">Ù‡Ù…Ù‡ Ù‚ÛŒÙ…Øªâ€ŒÙ‡Ø§</option>
            <option value="0-100000">ØªØ§ Û±Û°Û° Ù‡Ø²Ø§Ø± ØªÙˆÙ…Ø§Ù†</option>
            <option value="100000-500000">Û±Û°Û° ØªØ§ ÛµÛ°Û° Ù‡Ø²Ø§Ø± ØªÙˆÙ…Ø§Ù†</option>
            <option value="500000-1000000">ÛµÛ°Û° Ù‡Ø²Ø§Ø± ØªØ§ Û± Ù…ÛŒÙ„ÛŒÙˆÙ† ØªÙˆÙ…Ø§Ù†</option>
            <option value="1000000+">Ø¨ÛŒØ´ Ø§Ø² Û± Ù…ÛŒÙ„ÛŒÙˆÙ† ØªÙˆÙ…Ø§Ù†</option>
          </select>
        </div>
        
        <div class="filter-group">
          <label for="sort-by">Ù…Ø±ØªØ¨â€ŒØ³Ø§Ø²ÛŒ:</label>
          <select id="sort-by">
            <option value="name">Ø¨Ø± Ø§Ø³Ø§Ø³ Ù†Ø§Ù…</option>
            <option value="price-low">Ù‚ÛŒÙ…Øª (Ú©Ù… Ø¨Ù‡ Ø²ÛŒØ§Ø¯)</option>
            <option value="price-high">Ù‚ÛŒÙ…Øª (Ø²ÛŒØ§Ø¯ Ø¨Ù‡ Ú©Ù…)</option>
            <option value="rating">Ø§Ù…ØªÛŒØ§Ø²</option>
            <option value="newest">Ø¬Ø¯ÛŒØ¯ØªØ±ÛŒÙ†</option>
            <option value="popular">Ù…Ø­Ø¨ÙˆØ¨â€ŒØªØ±ÛŒÙ†</option>
          </select>
        </div>
        
        <div class="filter-group">
          <label for="search-products">Ø¬Ø³ØªØ¬Ùˆ:</label>
          <input type="text" id="search-products" placeholder="Ù†Ø§Ù… Ù…Ø­ØµÙˆÙ„...">
        </div>
        
        <div class="filter-group">
          <button type="button" id="clear-filters" style="padding: 8px 16px; background: #dc3545; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 600;">
            Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ÙÛŒÙ„ØªØ±Ù‡Ø§
          </button>
        </div>
      </div>
      
      <div class="layout-controls">
        <button class="layout-btn active" data-layout="grid-4" title="Ù†Ù…Ø§ÛŒØ´ 4 Ø³ØªÙˆÙ†Ù‡">âŠ</button>
        <button class="layout-btn" data-layout="grid-3" title="Ù†Ù…Ø§ÛŒØ´ 3 Ø³ØªÙˆÙ†Ù‡">âŠ</button>
        <button class="layout-btn" data-layout="grid-2" title="Ù†Ù…Ø§ÛŒØ´ 2 Ø³ØªÙˆÙ†Ù‡">âŠ</button>
        <button class="layout-btn" data-layout="list-view" title="Ù†Ù…Ø§ÛŒØ´ Ù„ÛŒØ³ØªÛŒ">â˜°</button>
      </div>
    </div>
    
    <div class="modern-cards-container" id="product-list">
      <!-- Ù…Ø­ØµÙˆÙ„Ø§Øª Ø§Ø² localStorage Ø§ÛŒÙ†Ø¬Ø§ Ø±Ù†Ø¯Ø± Ù…ÛŒØ´Ù† -->
    </div>
    
    <!-- Ø¯Ú©Ù…Ù‡ ØªØ³Øª Ø¨Ø±Ø§ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ù…Ø­ØµÙˆÙ„Ø§Øª Ù†Ù…ÙˆÙ†Ù‡ -->
    <div style="text-align: center; margin-top: 30px;">
      <button onclick="addTestProducts()" style="padding: 12px 24px; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">
        Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ù…Ø­ØµÙˆÙ„Ø§Øª ØªØ³Øª
      </button>
    </div>
  </div>
</section>

<!-- Newsletter Section -->
<section class="newsletter-section">
  <div class="newsletter-container">
    <h2 class="newsletter-title">Ø¹Ø¶ÙˆÛŒØª Ø¯Ø± Ø®Ø¨Ø±Ù†Ø§Ù…Ù‡</h2>
    <p class="newsletter-subtitle">Ø§Ø² Ø¢Ø®Ø±ÛŒÙ† Ù…Ø­ØµÙˆÙ„Ø§Øª Ùˆ ØªØ®ÙÛŒÙâ€ŒÙ‡Ø§ Ø¨Ø§Ø®Ø¨Ø± Ø´ÙˆÛŒØ¯</p>
    <form class="newsletter-form">
      <input type="email" class="newsletter-input" placeholder="Ø§ÛŒÙ…ÛŒÙ„ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯..." required>
      <button type="submit" class="newsletter-button">Ø¹Ø¶ÙˆÛŒØª</button>
    </form>
  </div>
</section>

<!-- Modern Footer -->
<footer class="modern-footer">
  <div class="footer-container">
    <div class="footer-section">
      <h3>Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ú©Ø§Ø± Ø¢ÙˆØ§Ù„</h3>
      <p>ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ú©Ø§Ø± Ø¢ÙˆØ§Ù„ Ø¨Ø§ Ø¨ÛŒØ´ Ø§Ø² 10 Ø³Ø§Ù„ ØªØ¬Ø±Ø¨Ù‡ Ø¯Ø± Ø²Ù…ÛŒÙ†Ù‡ ÙØ±ÙˆØ´ Ù…Ø­ØµÙˆÙ„Ø§Øª Ø¨Ø§ Ú©ÛŒÙÛŒØªØŒ Ù‡Ù…ÙˆØ§Ø±Ù‡ Ø¯Ø± ØªÙ„Ø§Ø´ Ø¨Ø±Ø§ÛŒ Ø§Ø±Ø§Ø¦Ù‡ Ø¨Ù‡ØªØ±ÛŒÙ† Ø®Ø¯Ù…Ø§Øª Ø¨Ù‡ Ù…Ø´ØªØ±ÛŒØ§Ù† Ø¹Ø²ÛŒØ² Ø¨ÙˆØ¯Ù‡ Ø§Ø³Øª.</p>
    </div>
    
    <div class="footer-section">
      <h3>Ù„ÛŒÙ†Ú©â€ŒÙ‡Ø§ÛŒ Ù…ÙÛŒØ¯</h3>
      <p><a href="#">Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù…Ø§</a></p>
      <p><a href="#">ØªÙ…Ø§Ø³ Ø¨Ø§ Ù…Ø§</a></p>
      <p><a href="#">Ù‚ÙˆØ§Ù†ÛŒÙ† Ùˆ Ù…Ù‚Ø±Ø±Ø§Øª</a></p>
      <p><a href="#">Ø­Ø±ÛŒÙ… Ø®ØµÙˆØµÛŒ</a></p>
    </div>
    
    <div class="footer-section">
      <h3>Ø®Ø¯Ù…Ø§Øª Ù…Ø´ØªØ±ÛŒØ§Ù†</h3>
      <p><a href="#">Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø®Ø±ÛŒØ¯</a></p>
      <p><a href="#">Ù†Ø­ÙˆÙ‡ Ø§Ø±Ø³Ø§Ù„</a></p>
      <p><a href="#">Ø¨Ø§Ø²Ú¯Ø´Øª Ú©Ø§Ù„Ø§</a></p>
      <p><a href="#">Ø³ÙˆØ§Ù„Ø§Øª Ù…ØªØ¯Ø§ÙˆÙ„</a></p>
    </div>
    
    <div class="footer-section">
      <h3>ØªÙ…Ø§Ø³ Ø¨Ø§ Ù…Ø§</h3>
      <p>ğŸ“§ info@karaval.com</p>
      <p>ğŸ“ 021-12345678</p>
      <p>ğŸ“ ØªÙ‡Ø±Ø§Ù†ØŒ Ø®ÛŒØ§Ø¨Ø§Ù† ÙˆÙ„ÛŒØ¹ØµØ±</p>
    </div>
  </div>
  
  <div class="footer-bottom">
    <p>&copy; 2024 Ú©Ø§Ø± Ø¢ÙˆØ§Ù„. ØªÙ…Ø§Ù…ÛŒ Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸ Ø§Ø³Øª.</p>
  </div>
</footer>

<!-- Scroll to Top Button -->
<button class="scroll-to-top" id="scrollToTop" onclick="scrollToTop()">
  â†‘
</button>

<!-- Toast Container -->
<div class="toast-container" id="toastContainer"></div>

<div id="cart-modal" style="display:none; position:fixed; top:50%; left:50%; transform:translate(-50%, -50%);
  background:#fff; padding:20px; border-radius:10px; box-shadow:0 0 10px rgba(0,0,0,0.3); z-index:2000; max-width:90vw; max-height:80vh; overflow:auto;">
  <h2>Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯</h2>
  <ul id="cart-items"></ul>
  <button id="close-cart">Ø¨Ø³ØªÙ†</button>
 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
 

<!-- Ø¨Ø±ÛŒØ§ ÙˆØ±ÙˆØ¯ -->
 <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase.js"></script>


<div id="product-list"></div>
<!-- Ú©Ø§Ø±Øª Ù‡Ø§ÛŒ Ø§Ø³Ù„Ø§ÛŒØ¯ÛŒ -->
<script>
  const images = JSON.parse(localStorage.getItem("carouselImages")) || [];

  const carouselInner = document.getElementById("carousel-inner");

  if (images.length === 0) {
    carouselInner.innerHTML = `
      <div class="carousel-item active">
        <p class="text-center">ØªØµÙˆÛŒØ±ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯</p>
      </div>
    `;
  } else {
    images.forEach((src, i) => {
      const div = document.createElement("div");
      div.className = "carousel-item" + (i === 0 ? " active" : "");
      div.innerHTML = `<img src="${src}" class="d-block w-100 img-fluid" alt="slide">`;
      carouselInner.appendChild(div);
    });
  }
</script>


<script>
  // Ø³Ø§Ø®Øª Ø¯Ø§Ø¯Ù‡â€ŒÛŒ Ù†Ù…ÙˆÙ†Ù‡ Ø§Ú¯Ø± Ú†ÛŒØ²ÛŒ ØªÙˆ localStorage Ù†ÛŒØ³Øª
  if (!localStorage.getItem('products')) {
    const sampleProducts = [
      
    ];
    localStorage.setItem('products', JSON.stringify(sampleProducts));
  }

  function renderProductsFromStorage() {
    const container = document.getElementById('product-list');
    const products = JSON.parse(localStorage.getItem('products')) || [];
    const settings = JSON.parse(localStorage.getItem('displaySettings')) || {
      showRating: true,
      showStock: true,
      showCategory: true
    };

    if (products.length === 0) {
      container.innerHTML = '<p style="text-align:center;color:#777;">Ù…Ø­ØµÙˆÙ„ÛŒ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.</p>';
      updateProductStats([]);
      return;
    }

    // Ø§Ø¹Ù…Ø§Ù„ ÙÛŒÙ„ØªØ±Ù‡Ø§ Ùˆ Ù…Ø±ØªØ¨â€ŒØ³Ø§Ø²ÛŒ
    let filteredProducts = applyFilters(products);
    filteredProducts = sortProducts(filteredProducts);
    
    // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø¢Ù…Ø§Ø±
    updateProductStats(products);
    
    // Ø§Ø¹Ù…Ø§Ù„ layout Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡
    const currentLayout = localStorage.getItem('productLayout') || 'grid-4';
    applyLayout(currentLayout);
    
        // Ø§Ø¹Ù…Ø§Ù„ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù†Ù…Ø§ÛŒØ´
    applyDisplaySettings();
    
    if (filteredProducts.length === 0) {
      container.innerHTML = '<p style="text-align:center;color:#777;">Ù…Ø­ØµÙˆÙ„ÛŒ Ø¨Ø§ ÙÛŒÙ„ØªØ±Ù‡Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡ ÛŒØ§ÙØª Ù†Ø´Ø¯.</p>';
      return;
    }

    // Ù†Ù…Ø§ÛŒØ´ ØªØ¹Ø¯Ø§Ø¯ Ù†ØªØ§ÛŒØ¬
    const searchQuery = document.getElementById('search-products').value;
    const categoryQuery = document.getElementById('category-filter').value;
    if (searchQuery || categoryQuery) {
      const resultsInfo = document.createElement('div');
      resultsInfo.style.cssText = 'text-align: center; margin-bottom: 20px; padding: 10px; background: #f8f9fa; border-radius: 8px; color: #666;';
      resultsInfo.innerHTML = `Ù†ØªØ§ÛŒØ¬ Ø¬Ø³ØªØ¬Ùˆ: <strong>${filteredProducts.length}</strong> Ù…Ø­ØµÙˆÙ„ ÛŒØ§ÙØª Ø´Ø¯`;
      container.parentNode.insertBefore(resultsInfo, container);
    }

    container.innerHTML = '';

    filteredProducts.forEach(product => {
      const card = document.createElement('div');
      card.className = 'modern-apple-card';
      card.setAttribute('data-name', product.name);
      
      // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‚ÛŒÙ…Øª Ø¨Ø§ ØªØ®ÙÛŒÙ
      const originalPrice = product.price || 0;
      const discount = product.discount || 0;
      const finalPrice = originalPrice - (originalPrice * discount / 100);
      
      // ÙˆØ¶Ø¹ÛŒØª Ù…ÙˆØ¬ÙˆØ¯ÛŒ
      const stockStatus = product.stock > 0 ? 'Ù…ÙˆØ¬ÙˆØ¯' : 'Ù†Ø§Ù…ÙˆØ¬ÙˆØ¯';
      const stockClass = product.stock > 0 ? 'in-stock' : 'out-of-stock';
      
      // Ù†Ù…Ø§ÛŒØ´ Ø³ØªØ§Ø±Ù‡â€ŒÙ‡Ø§
      const rating = product.rating || 0;
      const stars = 'â˜…'.repeat(Math.floor(rating)) + 'â˜†'.repeat(5 - Math.floor(rating));
      
      card.innerHTML = `
        <div class="product-badges">
          ${discount > 0 ? `<span class="badge discount">${discount}% ØªØ®ÙÛŒÙ</span>` : ''}
          ${product.isNew ? '<span class="badge new">Ø¬Ø¯ÛŒØ¯</span>' : ''}
          ${product.isPopular ? '<span class="badge popular">Ù…Ø­Ø¨ÙˆØ¨</span>' : ''}
        </div>
        <img src="${product.image}" alt="${product.name}" />
        <div class="modern-card-content">
          ${settings.showCategory ? `<div class="product-category">${highlightSearchTerm(product.category || 'Ø¹Ù…ÙˆÙ…ÛŒ', searchQuery)}</div>` : ''}
          <h3 class="modern-card-title">${highlightSearchTerm(product.name, searchQuery)}</h3>
          ${settings.showRating ? `<div class="product-rating">
            <span class="stars">${stars}</span>
            <span class="rating-text">(${rating.toFixed(1)})</span>
          </div>` : ''}
          <div class="product-price-container">
            ${discount > 0 ? `<span class="original-price">${originalPrice.toLocaleString()} ØªÙˆÙ…Ø§Ù†</span>` : ''}
            <span class="modern-card-price">${finalPrice.toLocaleString()} ØªÙˆÙ…Ø§Ù†</span>
          </div>
          <p class="modern-card-description">${escapeHtml(product.description || '')}</p>
          ${settings.showStock ? `<div class="product-meta">
            <span class="stock-status ${stockClass}">${stockStatus}</span>
            ${product.stock > 0 ? `<span class="stock-count">Ù…ÙˆØ¬ÙˆØ¯ÛŒ: ${product.stock}</span>` : ''}
          </div>` : ''}
          <div class="modern-card-actions">
            <button class="modern-add-to-cart" onclick="addToCartWithAuth('${product.name}', ${finalPrice}, '${product.image}')" ${product.stock <= 0 ? 'disabled' : ''}>
              ${product.stock > 0 ? 'Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯' : 'Ù†Ø§Ù…ÙˆØ¬ÙˆØ¯'}
            </button>
            <button class="modern-quick-view" data-product='${JSON.stringify(product)}'>Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø³Ø±ÛŒØ¹</button>
          </div>
        </div>
      `;
      container.appendChild(card);
    });

    attachCartButtons();
    attachQuickViewButtons();
  }

  // ØªØ§Ø¨Ø¹ Ø§Ø¹Ù…Ø§Ù„ ÙÛŒÙ„ØªØ±Ù‡Ø§
  function applyFilters(products) {
    const categoryFilter = document.getElementById('category-filter');
    const priceFilter = document.getElementById('price-filter');
    const searchInput = document.getElementById('search-products');
    
    if (!categoryFilter || !priceFilter || !searchInput) {
      console.log('ÙÛŒÙ„ØªØ±Ù‡Ø§ Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯Ù†Ø¯');
      return products;
    }

    const categoryValue = categoryFilter.value;
    const priceValue = priceFilter.value;
    const searchQuery = searchInput.value.toLowerCase();

    console.log('ÙÛŒÙ„ØªØ±Ù‡Ø§:', { categoryValue, priceValue, searchQuery });

    return products.filter(product => {
      // ÙÛŒÙ„ØªØ± Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ - Ù…Ø«Ù„ Ø¬Ø³ØªØ¬ÙˆÛŒ Ø§ØµÙ„ÛŒ
      if (categoryValue && categoryValue !== '') {
        const productCategory = product.category || 'Ø¹Ù…ÙˆÙ…ÛŒ';
        console.log(`Ù…Ø­ØµÙˆÙ„ ${product.name}: Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ ${productCategory} vs ÙÛŒÙ„ØªØ± ${categoryValue}`);
        // Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ù†Ø§Ù… Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ (Ù…Ø«Ù„ Ø¬Ø³ØªØ¬ÙˆÛŒ Ø§ØµÙ„ÛŒ)
        if (!productCategory.toLowerCase().includes(categoryValue.toLowerCase())) {
          return false;
        }
      }

      // ÙÛŒÙ„ØªØ± Ù‚ÛŒÙ…Øª
      if (priceValue && priceValue !== '') {
        const price = product.price || 0;
        const [min, max] = priceValue.split('-').map(p => p === '+' ? Infinity : parseInt(p));
        console.log(`Ù…Ø­ØµÙˆÙ„ ${product.name}: Ù‚ÛŒÙ…Øª ${price} vs Ù…Ø­Ø¯ÙˆØ¯Ù‡ ${min}-${max}`);
        if (price < min || (max !== Infinity && price > max)) {
          return false;
        }
      }

      // ÙÛŒÙ„ØªØ± Ø¬Ø³ØªØ¬Ùˆ - Ù…Ø«Ù„ Ø¬Ø³ØªØ¬ÙˆÛŒ Ø§ØµÙ„ÛŒ
      if (searchQuery && searchQuery !== '') {
        const productName = product.name.toLowerCase();
        const productCategory = (product.category || 'Ø¹Ù…ÙˆÙ…ÛŒ').toLowerCase();
        console.log(`Ù…Ø­ØµÙˆÙ„ ${product.name}: Ø¬Ø³ØªØ¬Ùˆ "${searchQuery}" Ø¯Ø± Ù†Ø§Ù… "${productName}" Ùˆ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ "${productCategory}"`);
        // Ø¬Ø³ØªØ¬Ùˆ Ù‡Ù… Ø¯Ø± Ù†Ø§Ù… Ùˆ Ù‡Ù… Ø¯Ø± Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ
        if (!productName.includes(searchQuery) && !productCategory.includes(searchQuery)) {
          return false;
        }
      }

      return true;
    });
  }

  // ØªØ§Ø¨Ø¹ Ù…Ø±ØªØ¨â€ŒØ³Ø§Ø²ÛŒ Ù…Ø­ØµÙˆÙ„Ø§Øª
  function sortProducts(products) {
    const sortBy = document.getElementById('sort-by').value;
    
    return products.sort((a, b) => {
      switch (sortBy) {
        case 'name':
          return a.name.localeCompare(b.name, 'fa');
        case 'price-low':
          return (a.price || 0) - (b.price || 0);
        case 'price-high':
          return (b.price || 0) - (a.price || 0);
        case 'rating':
          return (b.rating || 0) - (a.rating || 0);
        case 'newest':
          return (b.id || 0) - (a.id || 0);
        case 'popular':
          return (b.isPopular ? 1 : 0) - (a.isPopular ? 1 : 0);
        default:
          return 0;
      }
    });
  }

  // ØªØ§Ø¨Ø¹ Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø¢Ù…Ø§Ø± Ù…Ø­ØµÙˆÙ„Ø§Øª
  function updateProductStats(products) {
    const totalProducts = products.length;
    const availableProducts = products.filter(p => p.stock > 0).length;
    const discountProducts = products.filter(p => p.discount > 0).length;
    const newProducts = products.filter(p => p.isNew).length;

    document.getElementById('total-products').textContent = totalProducts;
    document.getElementById('available-products').textContent = availableProducts;
    document.getElementById('discount-products').textContent = discountProducts;
    document.getElementById('new-products').textContent = newProducts;
  }

  // ØªØ§Ø¨Ø¹ Ø§Ø¹Ù…Ø§Ù„ layout
  function applyLayout(layout) {
    const container = document.getElementById('product-list');
    const layoutButtons = document.querySelectorAll('.layout-btn');
    
    // Ø­Ø°Ù Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ù‚Ø¨Ù„ÛŒ
    container.className = 'modern-cards-container';
    layoutButtons.forEach(btn => btn.classList.remove('active'));
    
    // Ø§Ø¹Ù…Ø§Ù„ layout Ø¬Ø¯ÛŒØ¯
    container.classList.add(layout);
    const activeButton = document.querySelector(`[data-layout="${layout}"]`);
    if (activeButton) {
      activeButton.classList.add('active');
    }
    
    // Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø± localStorage
    localStorage.setItem('productLayout', layout);
  }

  // ØªØ§Ø¨Ø¹ highlight Ú©Ø±Ø¯Ù† Ù…ØªÙ† Ø¬Ø³ØªØ¬Ùˆ
  function highlightSearchTerm(text, searchTerm) {
    if (!searchTerm || searchTerm === '') {
      return text;
    }
    
    const regex = new RegExp(`(${searchTerm})`, 'gi');
    return text.replace(regex, '<mark style="background: #ffeb3b; padding: 2px 4px; border-radius: 3px;">$1</mark>');
  }



  // ØªØ§Ø¨Ø¹ Ø§Ø¹Ù…Ø§Ù„ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù†Ù…Ø§ÛŒØ´
  function applyDisplaySettings() {
    const settings = JSON.parse(localStorage.getItem('displaySettings')) || {
      defaultLayout: 'grid-4',
      productsPerPage: 20,
      enableCategoryFilter: true,
      enablePriceFilter: true,
      enableSearch: true,
      enableSort: true,
      showStats: true,
      showRating: true,
      showStock: true,
      showCategory: true
    };

    // Ø§Ø¹Ù…Ø§Ù„ layout Ù¾ÛŒØ´â€ŒÙØ±Ø¶
    if (!localStorage.getItem('productLayout')) {
      applyLayout(settings.defaultLayout);
    }

    // Ù†Ù…Ø§ÛŒØ´/Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ø¢Ù…Ø§Ø±
    const statsContainer = document.getElementById('products-stats');
    if (statsContainer) {
      statsContainer.style.display = settings.showStats ? 'flex' : 'none';
    }

    // Ù†Ù…Ø§ÛŒØ´/Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† ÙÛŒÙ„ØªØ±Ù‡Ø§
    const categoryFilter = document.getElementById('category-filter');
    const priceFilter = document.getElementById('price-filter');
    const searchInput = document.getElementById('search-products');
    const sortSelect = document.getElementById('sort-by');

    if (categoryFilter) {
      categoryFilter.parentElement.style.display = settings.enableCategoryFilter ? 'flex' : 'none';
    }
    if (priceFilter) {
      priceFilter.parentElement.style.display = settings.enablePriceFilter ? 'flex' : 'none';
    }
    if (searchInput) {
      searchInput.parentElement.style.display = settings.enableSearch ? 'flex' : 'none';
    }
    if (sortSelect) {
      sortSelect.parentElement.style.display = settings.enableSort ? 'flex' : 'none';
    }
  }

  // ØªØ§Ø¨Ø¹ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø³Ø±ÛŒØ¹
  function attachQuickViewButtons() {
    document.querySelectorAll('.quick-view').forEach(button => {
      button.addEventListener('click', function() {
        const productData = JSON.parse(this.getAttribute('data-product'));
        showQuickView(productData);
      });
    });
  }

  // Ù†Ù…Ø§ÛŒØ´ Ù…ÙˆØ¯Ø§Ù„ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø³Ø±ÛŒØ¹
  function showQuickView(product) {
    const modal = document.getElementById('quickViewModal');
    const content = document.getElementById('modalProductContent');
    
    const originalPrice = product.price || 0;
    const discount = product.discount || 0;
    const finalPrice = originalPrice - (originalPrice * discount / 100);
    const rating = product.rating || 0;
    const stars = 'â˜…'.repeat(Math.floor(rating)) + 'â˜†'.repeat(5 - Math.floor(rating));
    
    content.innerHTML = `
      <img src="${product.image}" alt="${product.name}" class="modal-product-image" />
      <div class="modal-product-info">
        <h2>${product.name}</h2>
        <div class="product-rating">
          <span class="stars">${stars}</span>
          <span class="rating-text">(${rating.toFixed(1)})</span>
        </div>
        <div class="product-price-container">
          ${discount > 0 ? `<span class="original-price">${originalPrice.toLocaleString()} ØªÙˆÙ…Ø§Ù†</span>` : ''}
          <span class="final-price">${finalPrice.toLocaleString()} ØªÙˆÙ…Ø§Ù†</span>
        </div>
        <p>${escapeHtml(product.description || '')}</p>
        
        <div class="modal-product-details">
          <div class="detail-item">
            <div class="detail-label">Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ</div>
            <div class="detail-value">${product.category || 'Ø¹Ù…ÙˆÙ…ÛŒ'}</div>
          </div>
          <div class="detail-item">
            <div class="detail-label">Ù…ÙˆØ¬ÙˆØ¯ÛŒ</div>
            <div class="detail-value">${product.stock || 0} Ø¹Ø¯Ø¯</div>
          </div>
          <div class="detail-item">
            <div class="detail-label">ØªØ®ÙÛŒÙ</div>
            <div class="detail-value">${discount}%</div>
          </div>
          <div class="detail-item">
            <div class="detail-label">ÙˆØ¶Ø¹ÛŒØª</div>
            <div class="detail-value">${product.stock > 0 ? 'Ù…ÙˆØ¬ÙˆØ¯' : 'Ù†Ø§Ù…ÙˆØ¬ÙˆØ¯'}</div>
          </div>
        </div>
        
        <div class="card-actions">
          <button class="add-to-cart" onclick="addToCartFromModal('${product.name}', ${finalPrice}, '${product.image}')" ${product.stock <= 0 ? 'disabled' : ''}>
            ${product.stock > 0 ? 'Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯' : 'Ù†Ø§Ù…ÙˆØ¬ÙˆØ¯'}
          </button>
        </div>
      </div>
    `;
    
    modal.style.display = 'block';
  }

  // Ø¨Ø³ØªÙ† Ù…ÙˆØ¯Ø§Ù„
  function closeQuickView() {
    document.getElementById('quickViewModal').style.display = 'none';
  }

  // Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø§Ø² Ù…ÙˆØ¯Ø§Ù„
  function addToCartFromModal(name, price, image) {
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    
    const existingProduct = cart.find(item => item.name === name);
    if (existingProduct) {
      existingProduct.quantity++;
    } else {
      cart.push({ name, price, quantity: 1, image });
    }
    
    localStorage.setItem('cart', JSON.stringify(cart));
    updateCartCounter();
    alert(`${name} Ø¨Ù‡ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯.`);
    closeQuickView();
  }

  // Ø¨Ø³ØªÙ† Ù…ÙˆØ¯Ø§Ù„ Ø¨Ø§ Ú©Ù„ÛŒÚ© Ø¨ÛŒØ±ÙˆÙ†
  document.addEventListener('DOMContentLoaded', function() {
    const modal = document.getElementById('quickViewModal');
    if (modal) {
      modal.addEventListener('click', function(e) {
        if (e.target === this) {
          closeQuickView();
        }
      });
    }

    // Layout controls
    document.querySelectorAll('.layout-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        const layout = this.getAttribute('data-layout');
        applyLayout(layout);
      });
    });

    // Filter controls
    document.getElementById('category-filter').addEventListener('input', function() {
      // ØªØ§Ø®ÛŒØ± Ø¨Ø±Ø§ÛŒ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø²ÛŒØ§Ø¯
      clearTimeout(this.searchTimeout);
      this.searchTimeout = setTimeout(renderProductsFromStorage, 300);
    });
    document.getElementById('price-filter').addEventListener('change', renderProductsFromStorage);
    document.getElementById('sort-by').addEventListener('change', renderProductsFromStorage);
    
    // Search input
    document.getElementById('search-products').addEventListener('input', function() {
      // ØªØ§Ø®ÛŒØ± Ø¨Ø±Ø§ÛŒ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø²ÛŒØ§Ø¯
      clearTimeout(this.searchTimeout);
      this.searchTimeout = setTimeout(renderProductsFromStorage, 300);
    });

    // Clear filters button
    document.getElementById('clear-filters').addEventListener('click', function() {
      document.getElementById('category-filter').value = '';
      document.getElementById('price-filter').value = '';
      document.getElementById('search-products').value = '';
      document.getElementById('sort-by').value = 'name';
      renderProductsFromStorage();
    });

    // Ø§Ø¹Ù…Ø§Ù„ layout Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡
    const savedLayout = localStorage.getItem('productLayout') || 'grid-4';
    applyLayout(savedLayout);
    
    // ØªØ³Øª: Ù†Ù…Ø§ÛŒØ´ Ù…Ø­ØµÙˆÙ„Ø§Øª Ù…ÙˆØ¬ÙˆØ¯
    const products = JSON.parse(localStorage.getItem('products')) || [];
    console.log('Ù…Ø­ØµÙˆÙ„Ø§Øª Ù…ÙˆØ¬ÙˆØ¯:', products.length);
    products.forEach(product => {
      console.log(`Ù…Ø­ØµÙˆÙ„: ${product.name}, Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ: ${product.category || 'Ø¹Ù…ÙˆÙ…ÛŒ'}`);
    });
  });

function attachCartButtons() {
  document.querySelectorAll('.add-to-cart').forEach(button => {
    button.addEventListener('click', function () {
      const name = this.getAttribute('data-name');
      const price = parseInt(this.getAttribute('data-price'));
      
      // Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ù…Ø­ØµÙˆÙ„ Ø§ØµÙ„ÛŒ Ø§Ø² products
      const products = JSON.parse(localStorage.getItem('products')) || [];
      const product = products.find(p => p.name === name);
      const image = product ? product.image : '';

      let cart = JSON.parse(localStorage.getItem('cart')) || [];

      const existingProduct = cart.find(item => item.name === name);
      if (existingProduct) {
        existingProduct.quantity++;
      } else {
        cart.push({ name, price, quantity: 1, image }); // Ø§ÛŒÙ†Ø¬Ø§ ØªØµÙˆÛŒØ± Ø±Ùˆ Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯ÛŒÙ…
      }

      localStorage.setItem('cart', JSON.stringify(cart));
      updateCartCounter();
      alert(`${name} Ø¨Ù‡ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯.`);
    });
  });
}


  // Ø§Ø¬Ø±Ø§ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
  renderProductsFromStorage();
  
  // ØªØ§Ø¨Ø¹ Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ù…Ø­ØµÙˆÙ„Ø§Øª ØªØ³Øª
  function addTestProducts() {
    const testProducts = [
      {
        id: Date.now() + 1,
        name: "Ù„Ù¾â€ŒØªØ§Ù¾ Ø§Ù¾Ù„ Ù…Ú©â€ŒØ¨ÙˆÚ© Ù¾Ø±Ùˆ",
        price: 85000000,
        discount: 15,
        stock: 5,
        rating: 4.8,
        category: "Ø§Ù„Ú©ØªØ±ÙˆÙ†ÛŒÚ©",
        image: "https://via.placeholder.com/300x200/667eea/ffffff?text=MacBook+Pro",
        description: "Ù„Ù¾â€ŒØªØ§Ù¾ Ù‚Ø¯Ø±ØªÙ…Ù†Ø¯ Ø§Ù¾Ù„ Ø¨Ø§ Ù¾Ø±Ø¯Ø§Ø²Ù†Ø¯Ù‡ M2 Ùˆ Ù†Ù…Ø§ÛŒØ´Ú¯Ø± Retina",
        isNew: true,
        isPopular: true
      },
      {
        id: Date.now() + 2,
        name: "Ú¯ÙˆØ´ÛŒ Ø³Ø§Ù…Ø³ÙˆÙ†Ú¯ Galaxy S24",
        price: 45000000,
        discount: 10,
        stock: 12,
        rating: 4.6,
        category: "Ø§Ù„Ú©ØªØ±ÙˆÙ†ÛŒÚ©",
        image: "https://via.placeholder.com/300x200/27ae60/ffffff?text=Galaxy+S24",
        description: "Ú¯ÙˆØ´ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø³Ø§Ù…Ø³ÙˆÙ†Ú¯ Ø¨Ø§ Ø¯ÙˆØ±Ø¨ÛŒÙ† Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ùˆ Ø¨Ø§ØªØ±ÛŒ Ù‚Ø¯Ø±ØªÙ…Ù†Ø¯",
        isNew: true,
        isPopular: false
      },
      {
        id: Date.now() + 3,
        name: "Ú©ØªØ§Ø¨ Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒÙ†ÙˆÛŒØ³ÛŒ JavaScript",
        price: 850000,
        discount: 0,
        stock: 25,
        rating: 4.5,
        category: "Ú©ØªØ§Ø¨",
        image: "https://via.placeholder.com/300x200/f39c12/ffffff?text=JavaScript+Book",
        description: "Ú©ØªØ§Ø¨ Ø¬Ø§Ù…Ø¹ Ø¢Ù…ÙˆØ²Ø´ JavaScript Ø¨Ø±Ø§ÛŒ Ù…Ø¨ØªØ¯ÛŒØ§Ù† Ùˆ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒâ€ŒÙ‡Ø§",
        isNew: false,
        isPopular: true
      },
      {
        id: Date.now() + 4,
        name: "Ú©ÙØ´ ÙˆØ±Ø²Ø´ÛŒ Ù†Ø§ÛŒÚ©",
        price: 2800000,
        discount: 20,
        stock: 8,
        rating: 4.7,
        category: "ÙˆØ±Ø²Ø´ÛŒ",
        image: "https://via.placeholder.com/300x200/e74c3c/ffffff?text=Nike+Shoes",
        description: "Ú©ÙØ´ ÙˆØ±Ø²Ø´ÛŒ Ù†Ø§ÛŒÚ© Ø¨Ø§ Ø·Ø±Ø§Ø­ÛŒ Ù…Ø¯Ø±Ù† Ùˆ Ø±Ø§Ø­ØªÛŒ ÙÙˆÙ‚â€ŒØ§Ù„Ø¹Ø§Ø¯Ù‡",
        isNew: false,
        isPopular: true
      },
      {
        id: Date.now() + 5,
        name: "Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ Ú†ÙˆØ¨ÛŒ",
        price: 3500000,
        discount: 5,
        stock: 3,
        rating: 4.3,
        category: "Ø®Ø§Ù†Ú¯ÛŒ",
        image: "https://via.placeholder.com/300x200/8e44ad/ffffff?text=Wooden+Library",
        description: "Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ Ú†ÙˆØ¨ÛŒ Ø¯Ø³Øªâ€ŒØ³Ø§Ø² Ø¨Ø§ Ú©ÛŒÙÛŒØª Ø¨Ø§Ù„Ø§ Ùˆ Ø·Ø±Ø§Ø­ÛŒ Ø²ÛŒØ¨Ø§",
        isNew: false,
        isPopular: false
      },
      {
        id: Date.now() + 6,
        name: "Ø³Ø§Ø¹Øª Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø§Ù¾Ù„ ÙˆØ§Ú†",
        price: 18000000,
        discount: 12,
        stock: 7,
        rating: 4.9,
        category: "Ø§Ù„Ú©ØªØ±ÙˆÙ†ÛŒÚ©",
        image: "https://via.placeholder.com/300x200/3498db/ffffff?text=Apple+Watch",
        description: "Ø³Ø§Ø¹Øª Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø§Ù¾Ù„ Ø¨Ø§ Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ø³Ù„Ø§Ù…ØªÛŒ",
        isNew: true,
        isPopular: true
      },
      {
        id: Date.now() + 7,
        name: "Ù¾ÛŒØ±Ø§Ù‡Ù† Ù…Ø±Ø¯Ø§Ù†Ù‡",
        price: 450000,
        discount: 0,
        stock: 15,
        rating: 4.2,
        category: "Ù¾ÙˆØ´Ø§Ú©",
        image: "https://via.placeholder.com/300x200/1abc9c/ffffff?text=Men+Shirt",
        description: "Ù¾ÛŒØ±Ø§Ù‡Ù† Ù…Ø±Ø¯Ø§Ù†Ù‡ Ø¨Ø§ Ù¾Ø§Ø±Ú†Ù‡ Ø¨Ø§ Ú©ÛŒÙÛŒØª Ùˆ Ø¯ÙˆØ®Øª Ø¹Ø§Ù„ÛŒ",
        isNew: false,
        isPopular: false
      },
      {
        id: Date.now() + 8,
        name: "Ú©ØªØ§Ø¨ Ø±Ù…Ø§Ù† ÙØ§Ø±Ø³ÛŒ",
        price: 320000,
        discount: 8,
        stock: 30,
        rating: 4.4,
        category: "Ú©ØªØ§Ø¨",
        image: "https://via.placeholder.com/300x200/95a5a6/ffffff?text=Persian+Novel",
        description: "Ø±Ù…Ø§Ù† ÙØ§Ø±Ø³ÛŒ Ù…Ø¹Ø§ØµØ± Ø¨Ø§ Ø¯Ø§Ø³ØªØ§Ù† Ø¬Ø°Ø§Ø¨ Ùˆ Ù†Ú¯Ø§Ø±Ø´ Ø²ÛŒØ¨Ø§",
        isNew: false,
        isPopular: false
      }
    ];
    
    const existingProducts = JSON.parse(localStorage.getItem('products')) || [];
    const allProducts = [...existingProducts, ...testProducts];
    localStorage.setItem('products', JSON.stringify(allProducts));
    
    alert(`${testProducts.length} Ù…Ø­ØµÙˆÙ„ ØªØ³Øª Ø¨Ø§ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯!`);
    renderProductsFromStorage();
  }
  
  function updateCartCounter() {
    const currentUser = JSON.parse(localStorage.getItem('currentUser'));
    let count = 0;
    
    if (currentUser) {
      // Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡ Ø¨Ø±Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø± ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡
      const cartKey = `cart_${currentUser.email}`;
      const cart = JSON.parse(localStorage.getItem(cartKey)) || [];
      count = cart.reduce((sum, item) => sum + item.quantity, 0);
    } else {
      // Ø¨Ø±Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ù…Ù‡Ù…Ø§Ù†ØŒ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø¹Ù…ÙˆÙ…ÛŒ
      const cart = JSON.parse(localStorage.getItem('cart')) || [];
      count = cart.reduce((sum, item) => sum + item.quantity, 0);
    }
    
    const cartLinks = document.querySelectorAll('a[href="cart.html"]');
    cartLinks.forEach(link => {
      link.textContent = `Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ (${count})`;
    });
  }
  
  updateCartCounter();
  
  // Ø¬Ø³ØªØ¬ÙˆÛŒ Ø²Ù†Ø¯Ù‡ Ù…Ø­ØµÙˆÙ„Ø§Øª (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)
  function enableLiveSearch() {
    const searchInput = document.querySelector('.search-popup input');
    if (!searchInput) return;
    searchInput.addEventListener('input', () => {
      const keyword = searchInput.value.trim().toLowerCase();
      const cards = document.querySelectorAll('.apple-card');
      cards.forEach(card => {
        const title = card.querySelector('h3').textContent.toLowerCase();
        card.style.display = title.includes(keyword) ? 'block' : 'none';
      });
    });
  }
  
  enableLiveSearch();
</script>
<script>
  // Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ firebase
  const firebaseConfig = {
    apiKey: "API_KEY",
    authDomain: "kar-aval.firebaseapp.com",
    projectId: "kar-aval",
    storageBucket: "kar-aval.appspot.com",
    messagingSenderId: "349367654007",
    appId: "1:349367654007:web:8a5d8b786f87bacc8d1872",
    measurementId: "G-L3WZYC96EP"
  };

  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();

  auth.onAuthStateChanged(user => {
    if (user) {
      // Ú©Ø§Ø±Ø¨Ø± ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡ØŒ Ù…Ø«Ù„Ø§ Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ§Ù… Ø®ÙˆØ´ Ø¢Ù…Ø¯
      document.getElementById('welcomeMsg').innerText = `Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒ ${user.email}`;
    } else {
      // Ú©Ø§Ø±Ø¨Ø± ÙˆØ§Ø±Ø¯ Ù†Ø´Ø¯Ù‡ØŒ Ù‡Ø¯Ø§ÛŒØª Ø¨Ù‡ ØµÙØ­Ù‡ ÙˆØ±ÙˆØ¯
      window.location.href = 'log.html';
    }
  });
</script>

<div id="welcomeMsg"></div>
<script>
  // Ø¨Ø±Ø§ÛŒ Ù…Ù†ÙˆÛŒ Ú©Ø§Ø± Ø¨Ø±
  const userButton = document.getElementById('user-button');
  const userMenu = document.getElementById('user-menu');

  // Ø¨Ø§Ø² Ùˆ Ø¨Ø³ØªÙ‡ Ú©Ø±Ø¯Ù† Ù…Ù†Ùˆ Ø¨Ø§ Ú©Ù„ÛŒÚ© Ø¯Ú©Ù…Ù‡
  userButton.addEventListener('click', e => {
    e.preventDefault();
    const isHidden = userMenu.getAttribute('aria-hidden') === 'true';
    userMenu.setAttribute('aria-hidden', isHidden ? 'false' : 'true');
  });

  // Ø¨Ø³ØªÙ† Ù…Ù†Ùˆ Ù‡Ù†Ú¯Ø§Ù… Ú©Ù„ÛŒÚ© Ø¨ÛŒØ±ÙˆÙ†
  document.addEventListener('click', e => {
    if (!userButton.contains(e.target) && !userMenu.contains(e.target)) {
      userMenu.setAttribute('aria-hidden', 'true');
    }
  });

  // Ø­Ø°Ù Ú©Ø¯ Ù‡Ø§ÛŒ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ù‡Ø§ÙˆØ± Ø¨Ø±Ø§ÛŒ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² ØªØ¯Ø§Ø®Ù„
</script>
<script>
  // Ù…Ù†ÙˆÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„
  const hamburger = document.getElementById('hamburger');
  const mobileMenu = document.getElementById('mobileMenu');
  // const mainNav = document.getElementById('main-nav'); // Ø­Ø°Ù Ø§ÛŒÙ† Ø®Ø· Ú†ÙˆÙ† Ù‚Ø¨Ù„Ø§Ù‹ ØªØ¹Ø±ÛŒÙ Ø´Ø¯Ù‡

  function cloneMenuItems() {
    // Ú©Ù¾ÛŒ Ú©Ø±Ø¯Ù† Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ Ø¨Ù‡ Ù…Ù†ÙˆÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„
    mobileMenu.innerHTML = '';
    Array.from(mainNav.children).forEach(item => {
      if (item.tagName === 'A') {
        const clone = item.cloneNode(true);
        clone.onclick = () => { mobileMenu.classList.remove('show'); };
        mobileMenu.appendChild(clone);
      }
    });
  }

  // Ø¨Ø§Ø² Ùˆ Ø¨Ø³ØªÙ‡ Ú©Ø±Ø¯Ù† Ù…Ù†ÙˆÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„
  hamburger.addEventListener('click', () => {
    mobileMenu.classList.toggle('show');
  });

  // Ø¨Ø³ØªÙ† Ù…Ù†ÙˆÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ Ø¨Ø§ Ú©Ù„ÛŒÚ© Ø¨ÛŒØ±ÙˆÙ†
  window.addEventListener('click', e => {
    if (!mobileMenu.contains(e.target) && !hamburger.contains(e.target)) {
      mobileMenu.classList.remove('show');
    }
  });

  // Ø§Ø¬Ø±Ø§ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
  cloneMenuItems();
</script>

<script>

  // Ø¨Ø§Ø² Ùˆ Ø¨Ø³ØªÙ‡ Ú©Ø±Ø¯Ù† Ù¾Ù†Ø¬Ø±Ù‡ Ø¬Ø³ØªØ¬Ùˆ
  const searchToggle = document.getElementById('search-toggle');
  const searchPopup = document.getElementById('searchPopup'); // Changed from .search-popup
  const closeSearch = document.getElementById('close-search');
  const searchInput = document.getElementById('search-input');
  const mainNav = document.getElementById('main-nav');
  const links = mainNav.getElementsByTagName('a');

  searchToggle.addEventListener('click', () => {
    searchPopup.style.display = 'block';
    searchInput.focus();
  });

  closeSearch.addEventListener('click', () => {
    searchPopup.style.display = 'none';
    searchInput.value = '';
    // Ù†Ù…Ø§ÛŒØ´ Ù‡Ù…Ù‡ Ù„ÛŒÙ†Ú©â€ŒÙ‡Ø§ ÙˆÙ‚ØªÛŒ Ø¬Ø³ØªØ¬Ùˆ Ø¨Ø³ØªÙ‡ Ø´Ø¯
    for (let link of links) {
      link.style.display = '';
    }
  });

  // Ø¬Ø³ØªØ¬ÙˆÛŒ Ø²Ù†Ø¯Ù‡ Ø¯Ø± Ù…Ù†Ùˆ
  searchInput.addEventListener('input', () => {
    const filter = searchInput.value.trim().toLowerCase();

    for (let link of links) {
      const text = link.textContent.toLowerCase();
      if (text.includes(filter)) {
        link.style.display = '';
      } else {
        link.style.display = 'none';
      }
    }
  });
</script>
<script>
  function escapeHtml(text) {
  return text.replace(/[&<>"']/g, function(m) {
    return {
      '&': '&amp;',
      '<': '&lt;',
      '>': '&gt;',
      '"': '&quot;',
      "'": '&#39;'
    }[m];
  });
}

  function renderProductsFromStorage() {
    const container = document.getElementById('product-list');
    const products = JSON.parse(localStorage.getItem('products')) || [];

    if (products.length === 0) {
      container.innerHTML = '<p style="text-align:center;color:#777;">Ù…Ø­ØµÙˆÙ„ÛŒ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.</p>';
      return;
    }

    container.innerHTML = '';

    products.forEach(product => {
      const card = document.createElement('div');
      card.className = 'apple-card';
      
      // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‚ÛŒÙ…Øª Ø¨Ø§ ØªØ®ÙÛŒÙ
      const originalPrice = product.price || 0;
      const discount = product.discount || 0;
      const finalPrice = originalPrice - (originalPrice * discount / 100);
      
      // ÙˆØ¶Ø¹ÛŒØª Ù…ÙˆØ¬ÙˆØ¯ÛŒ
      const stockStatus = product.stock > 0 ? 'Ù…ÙˆØ¬ÙˆØ¯' : 'Ù†Ø§Ù…ÙˆØ¬ÙˆØ¯';
      const stockClass = product.stock > 0 ? 'in-stock' : 'out-of-stock';
      
      // Ù†Ù…Ø§ÛŒØ´ Ø³ØªØ§Ø±Ù‡â€ŒÙ‡Ø§
      const rating = product.rating || 0;
      const stars = 'â˜…'.repeat(Math.floor(rating)) + 'â˜†'.repeat(5 - Math.floor(rating));
      
      card.innerHTML = `
        <div class="product-badges">
          ${discount > 0 ? `<span class="badge discount">${discount}% ØªØ®ÙÛŒÙ</span>` : ''}
          ${product.isNew ? '<span class="badge new">Ø¬Ø¯ÛŒØ¯</span>' : ''}
          ${product.isPopular ? '<span class="badge popular">Ù…Ø­Ø¨ÙˆØ¨</span>' : ''}
        </div>
        <img src="${product.image}" alt="${product.name}" />
        <div class="apple-card-content">
          <div class="product-category">${product.category || 'Ø¹Ù…ÙˆÙ…ÛŒ'}</div>
          <h3>${product.name}</h3>
          <div class="product-rating">
            <span class="stars">${stars}</span>
            <span class="rating-text">(${rating.toFixed(1)})</span>
          </div>
          <div class="product-price-container">
            ${discount > 0 ? `<span class="original-price">${originalPrice.toLocaleString()} ØªÙˆÙ…Ø§Ù†</span>` : ''}
            <span class="final-price">${finalPrice.toLocaleString()} ØªÙˆÙ…Ø§Ù†</span>
          </div>
          <p class="desc">${escapeHtml(product.description || '')}</p>
          <div class="product-meta">
            <span class="stock-status ${stockClass}">${stockStatus}</span>
            ${product.stock > 0 ? `<span class="stock-count">Ù…ÙˆØ¬ÙˆØ¯ÛŒ: ${product.stock}</span>` : ''}
          </div>
          <div class="card-actions">
            <button class="add-to-cart" data-name="${product.name}" data-price="${finalPrice}" data-image="${product.image}" ${product.stock <= 0 ? 'disabled' : ''}>
              ${product.stock > 0 ? 'Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯' : 'Ù†Ø§Ù…ÙˆØ¬ÙˆØ¯'}
            </button>
            <button class="quick-view" data-product='${JSON.stringify(product)}'>Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø³Ø±ÛŒØ¹</button>
          </div>
        </div>
      `;
      container.appendChild(card);
    });

    attachCartButtons();
    attachQuickViewButtons();
  }
function attachCartButtons() {
  document.querySelectorAll('.add-to-cart').forEach(button => {
    button.addEventListener('click', function () {
      const name = this.getAttribute('data-name');
      const price = parseInt(this.getAttribute('data-price'));
      const image = this.getAttribute('data-image');
      
      // Ø¨Ø±Ø±Ø³ÛŒ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª
      const currentUser = JSON.parse(localStorage.getItem('currentUser'));
      if (!currentUser) {
        if (confirm('Ø¨Ø±Ø§ÛŒ Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ù†ÛŒØ§Ø² Ø¨Ù‡ ÙˆØ±ÙˆØ¯ Ø¯Ø§Ø±ÛŒØ¯. Ø¢ÛŒØ§ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ ÙˆØ§Ø±Ø¯ Ø´ÙˆÛŒØ¯ØŸ')) {
          window.location.href = 'auth.html';
        }
        return;
      }
      
      // Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡ Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ú©Ø§Ø±Ø¨Ø±
      const cartKey = `cart_${currentUser.email}`;
      let cart = JSON.parse(localStorage.getItem(cartKey)) || [];

      const existingProduct = cart.find(item => item.name === name);
      if (existingProduct) {
        existingProduct.quantity++;
      } else {
        cart.push({ name, price, quantity: 1, image });
      }

      localStorage.setItem(cartKey, JSON.stringify(cart));
      updateCartCounter();
      alert(`${name} Ø¨Ù‡ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯.`);
    });
  });
}

document.addEventListener('DOMContentLoaded', function () {
  // products.forEach(...) Ùˆ attachCartButtons() Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ø§Ø´Ù†
});



  function updateCartCounter() {
    const currentUser = JSON.parse(localStorage.getItem('currentUser'));
    let count = 0;
    
    if (currentUser) {
      // Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡ Ø¨Ø±Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø± ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡
      const cartKey = `cart_${currentUser.email}`;
      const cart = JSON.parse(localStorage.getItem(cartKey)) || [];
      count = cart.reduce((sum, item) => sum + item.quantity, 0);
    } else {
      // Ø¨Ø±Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ù…Ù‡Ù…Ø§Ù†ØŒ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø¹Ù…ÙˆÙ…ÛŒ
      const cart = JSON.parse(localStorage.getItem('cart')) || [];
      count = cart.reduce((sum, item) => sum + item.quantity, 0);
    }
    
    const cartLinks = document.querySelectorAll('a[href="cart.html"]');
    cartLinks.forEach(link => {
      link.textContent = `Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ (${count})`;
    });
  }

  // Ø¬Ø³ØªØ¬ÙˆÛŒ Ø²Ù†Ø¯Ù‡ Ù…Ø­ØµÙˆÙ„Ø§Øª (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)
  function enableLiveSearch() {
    const searchInput = document.querySelector('.search-popup input');
    if (!searchInput) return;
    searchInput.addEventListener('input', () => {
      const keyword = searchInput.value.trim().toLowerCase();
      const cards = document.querySelectorAll('.apple-card');
      cards.forEach(card => {
        const title = card.querySelector('h3').textContent.toLowerCase();
        card.style.display = title.includes(keyword) ? 'block' : 'none';
      });
    });
  }

  renderProductsFromStorage();
  updateCartCounter();
  enableLiveSearch();
  
  // Check authentication for protected actions
  function checkAuthForAction(action) {
    const currentUser = JSON.parse(localStorage.getItem('currentUser'));
    if (!currentUser) {
      if (confirm('Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ø¹Ù…Ù„ÛŒØ§Øª Ù†ÛŒØ§Ø² Ø¨Ù‡ ÙˆØ±ÙˆØ¯ Ø¯Ø§Ø±ÛŒØ¯. Ø¢ÛŒØ§ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ ÙˆØ§Ø±Ø¯ Ø´ÙˆÛŒØ¯ØŸ')) {
        window.location.href = 'auth.html';
      }
      return false;
    }
    return true;
  }
  
  // Override add to cart to check auth
  function addToCartWithAuth(name, price, image) {
    if (checkAuthForAction('add to cart')) {
      let cart = JSON.parse(localStorage.getItem('cart')) || [];
      const existingProduct = cart.find(item => item.name === name);
      
      if (existingProduct) {
        existingProduct.quantity++;
      } else {
        cart.push({ name, price, quantity: 1, image });
      }
      
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCartCounter();
      showToast(`${name} Ø¨Ù‡ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯`, 'success');
    }
  }
  
  // Show toast function
  function showToast(message, type = 'success') {
    // Create toast element if it doesn't exist
    let toast = document.getElementById('toast');
    if (!toast) {
      toast = document.createElement('div');
      toast.id = 'toast';
      toast.style.cssText = `
        position: fixed;
        bottom: 30px;
        right: 30px;
        background: linear-gradient(135deg, #2ecc71, #27ae60);
        color: white;
        padding: 15px 25px;
        border-radius: 12px;
        font-weight: 600;
        display: none;
        box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        z-index: 1000;
        transition: all 0.4s ease;
        backdrop-filter: blur(10px);
        font-family: 'Vazirmatn', sans-serif;
      `;
      document.body.appendChild(toast);
    }
    
    toast.textContent = message;
    toast.style.display = 'block';
    toast.style.opacity = '1';
    
    setTimeout(() => {
      toast.style.opacity = '0';
      setTimeout(() => {
        toast.style.display = 'none';
      }, 400);
    }, 3000);
  }
</script>

<!-- Ù…ÙˆØ¯Ø§Ù„ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø³Ø±ÛŒØ¹ -->
<div id="quickViewModal" class="quick-view-modal">
  <div class="modal-content">
    <div class="modal-header">
      <h3>Ø¬Ø²Ø¦ÛŒØ§Øª Ù…Ø­ØµÙˆÙ„</h3>
      <button class="modal-close" onclick="closeQuickView()">&times;</button>
    </div>
    <div id="modalProductContent">
      <!-- Ù…Ø­ØªÙˆØ§ÛŒ Ù…Ø­ØµÙˆÙ„ Ø§ÛŒÙ†Ø¬Ø§ Ù‚Ø±Ø§Ø± Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ø¯ -->
    </div>
  </div>
</div>

<script>
  // ØªØ§Ø¨Ø¹ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø³Ø±ÛŒØ¹
  function attachQuickViewButtons() {
    document.querySelectorAll('.quick-view').forEach(button => {
      button.addEventListener('click', function() {
        const productData = JSON.parse(this.getAttribute('data-product'));
        showQuickView(productData);
      });
    });
  }

  // Ù†Ù…Ø§ÛŒØ´ Ù…ÙˆØ¯Ø§Ù„ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø³Ø±ÛŒØ¹
  function showQuickView(product) {
    const modal = document.getElementById('quickViewModal');
    const content = document.getElementById('modalProductContent');
    
    const originalPrice = product.price || 0;
    const discount = product.discount || 0;
    const finalPrice = originalPrice - (originalPrice * discount / 100);
    const rating = product.rating || 0;
    const stars = 'â˜…'.repeat(Math.floor(rating)) + 'â˜†'.repeat(5 - Math.floor(rating));
    
    content.innerHTML = `
      <img src="${product.image}" alt="${product.name}" class="modal-product-image" />
      <div class="modal-product-info">
        <h2>${product.name}</h2>
        <div class="product-rating">
          <span class="stars">${stars}</span>
          <span class="rating-text">(${rating.toFixed(1)})</span>
        </div>
        <div class="product-price-container">
          ${discount > 0 ? `<span class="original-price">${originalPrice.toLocaleString()} ØªÙˆÙ…Ø§Ù†</span>` : ''}
          <span class="final-price">${finalPrice.toLocaleString()} ØªÙˆÙ…Ø§Ù†</span>
        </div>
        <p>${escapeHtml(product.description || '')}</p>
        
        <div class="modal-product-details">
          <div class="detail-item">
            <div class="detail-label">Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ</div>
            <div class="detail-value">${product.category || 'Ø¹Ù…ÙˆÙ…ÛŒ'}</div>
          </div>
          <div class="detail-item">
            <div class="detail-label">Ù…ÙˆØ¬ÙˆØ¯ÛŒ</div>
            <div class="detail-value">${product.stock || 0} Ø¹Ø¯Ø¯</div>
          </div>
          <div class="detail-item">
            <div class="detail-label">ØªØ®ÙÛŒÙ</div>
            <div class="detail-value">${discount}%</div>
          </div>
          <div class="detail-item">
            <div class="detail-label">ÙˆØ¶Ø¹ÛŒØª</div>
            <div class="detail-value">${product.stock > 0 ? 'Ù…ÙˆØ¬ÙˆØ¯' : 'Ù†Ø§Ù…ÙˆØ¬ÙˆØ¯'}</div>
          </div>
        </div>
        
        <div class="card-actions">
          <button class="add-to-cart" onclick="addToCartFromModal('${product.name}', ${finalPrice}, '${product.image}')" ${product.stock <= 0 ? 'disabled' : ''}>
            ${product.stock > 0 ? 'Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯' : 'Ù†Ø§Ù…ÙˆØ¬ÙˆØ¯'}
          </button>
        </div>
      </div>
    `;
    
    modal.style.display = 'block';
  }

  // Ø¨Ø³ØªÙ† Ù…ÙˆØ¯Ø§Ù„
  function closeQuickView() {
    document.getElementById('quickViewModal').style.display = 'none';
  }

  // Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø§Ø² Ù…ÙˆØ¯Ø§Ù„
  function addToCartFromModal(name, price, image) {
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    
    const existingProduct = cart.find(item => item.name === name);
    if (existingProduct) {
      existingProduct.quantity++;
    } else {
      cart.push({ name, price, quantity: 1, image });
    }
    
    localStorage.setItem('cart', JSON.stringify(cart));
    updateCartCounter();
    alert(`${name} Ø¨Ù‡ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯.`);
    closeQuickView();
  }

  // Ø¨Ø³ØªÙ† Ù…ÙˆØ¯Ø§Ù„ Ø¨Ø§ Ú©Ù„ÛŒÚ© Ø¨ÛŒØ±ÙˆÙ†
  document.getElementById('quickViewModal').addEventListener('click', function(e) {
    if (e.target === this) {
      closeQuickView();
    }
  });
</script>

<script>
  // Ø§Ú¯Ø± Ø¯Ø§Ø¯Ù‡ carouselImages Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³ØªØŒ Ù…Ù‚Ø¯Ø§Ø± Ù†Ù…ÙˆÙ†Ù‡ Ù‚Ø±Ø§Ø± Ø¨Ø¯Ù‡
  if (!localStorage.getItem("carouselImages")) {
    const sampleImages = [
      "https://via.placeholder.com/800x400?text=Slide+1",
      "https://via.placeholder.com/800x400?text=Slide+2",
      "https://via.placeholder.com/800x400?text=Slide+3"
    ];
    localStorage.setItem("carouselImages", JSON.stringify(sampleImages));
  }
</script>

<!-- Ù…ÙˆØ¯Ø§Ù„ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø³Ø±ÛŒØ¹ -->
<div id="quickViewModal" class="quick-view-modal">
  <div class="modal-content">
    <div class="modal-header">
      <h3>Ø¬Ø²Ø¦ÛŒØ§Øª Ù…Ø­ØµÙˆÙ„</h3>
      <button class="modal-close" onclick="closeQuickView()">&times;</button>
    </div>
    <div id="modalProductContent">
      <!-- Ù…Ø­ØªÙˆØ§ÛŒ Ù…Ø­ØµÙˆÙ„ Ø§ÛŒÙ†Ø¬Ø§ Ù‚Ø±Ø§Ø± Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ø¯ -->
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>

<!-- Authentication System -->
<script>
  // Check authentication status on page load
  document.addEventListener('DOMContentLoaded', function() {
    console.log('DOM loaded, checking auth status...');
    checkAuthStatus();
    
    // Test if user button exists
    const userButton = document.getElementById('user-button');
    const userMenu = document.getElementById('user-menu');
    
    if (userButton) {
      console.log('User button found:', userButton);
    } else {
      console.log('User button not found!');
    }
    
    if (userMenu) {
      console.log('User menu found:', userMenu);
    } else {
      console.log('User menu not found!');
    }
    
    // Test menu functionality
    setTimeout(() => {
      console.log('Testing menu functionality...');
      const testButton = document.getElementById('user-button');
      const testMenu = document.getElementById('user-menu');
      if (testButton && testMenu) {
        console.log('User button and menu are ready');
        console.log('Button:', testButton);
        console.log('Menu:', testMenu);
      }
    }, 1000);
  });

  // Check if user is logged in
  function checkAuthStatus() {
    const currentUser = JSON.parse(localStorage.getItem('currentUser'));
    const welcomeMsg = document.getElementById('welcome-msg');
    const guestActions = document.getElementById('guest-actions');
    const userActions = document.getElementById('user-actions');

    console.log('Checking auth status...');
    console.log('Current user:', currentUser);

    if (currentUser) {
      // User is logged in
      welcomeMsg.innerHTML = `
        <div style="display: flex; align-items: center; justify-content: center; gap: 10px;">
          <span style="font-size: 20px;">ğŸ‘‹</span>
          <div>
            <div style="font-size: 18px; font-weight: bold;">Ø³Ù„Ø§Ù…ØŒ ${currentUser.firstname} Ø¹Ø²ÛŒØ²!</div>
            <div style="font-size: 12px; opacity: 0.8; margin-top: 2px;">Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯ Ø¨Ù‡ ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ú©Ø§Ø± Ø§ÙˆÙ„</div>
          </div>
        </div>
      `;
      guestActions.style.display = 'none';
      userActions.style.display = 'block';
      console.log('User is logged in');
    } else {
      // User is guest
      welcomeMsg.innerHTML = `
        <div style="display: flex; align-items: center; justify-content: center; gap: 10px;">
          <span style="font-size: 20px;">ğŸ‘‹</span>
          <div>
            <div style="font-size: 18px; font-weight: bold;">Ø³Ù„Ø§Ù…ØŒ Ú©Ø§Ø±Ø¨Ø± Ø¹Ø²ÛŒØ²!</div>
            <div style="font-size: 12px; opacity: 0.8; margin-top: 2px;">Ø¨Ø±Ø§ÛŒ ØªØ¬Ø±Ø¨Ù‡ Ø¨Ù‡ØªØ± ÙˆØ§Ø±Ø¯ Ø´ÙˆÛŒØ¯</div>
          </div>
        </div>
      `;
      guestActions.style.display = 'block';
      userActions.style.display = 'none';
      console.log('User is guest');
    }
  }

  // Logout function
  function logout() {
    if (confirm('Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø®Ø§Ø±Ø¬ Ø´ÙˆÛŒØ¯ØŸ')) {
      localStorage.removeItem('currentUser');
      checkAuthStatus();
      alert('Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø®Ø§Ø±Ø¬ Ø´Ø¯ÛŒØ¯!');
    }
  }

  // Redirect to auth page
  function goToAuth() {
    window.location.href = 'auth.html';
  }

  // Test function for debugging
  function testUserMenu() {
    console.log('Testing user menu...');
    const userButton = document.getElementById('user-button');
    const userMenu = document.getElementById('user-menu');
    
    if (userButton) {
      console.log('User button found');
      userButton.click();
    } else {
      console.log('User button not found');
    }
    
    if (userMenu) {
      console.log('User menu found, display:', userMenu.style.display);
    } else {
      console.log('User menu not found');
    }
  }

  // User menu toggle
  function toggleUserMenu() {
    const userMenu = document.getElementById('user-menu');
    if (userMenu) {
      const isVisible = userMenu.style.display === 'flex';
      userMenu.style.display = isVisible ? 'none' : 'flex';
      console.log('Menu toggled:', userMenu.style.display);
    }
  }

  // Add click event to user button
  document.addEventListener('DOMContentLoaded', function() {
    const userButton = document.getElementById('user-button');
    if (userButton) {
      userButton.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        console.log('User button clicked!');
        toggleUserMenu();
      });
    }
  });

  // Close user menu when clicking outside
  document.addEventListener('click', function(e) {
    const userMenu = document.getElementById('user-menu');
    const userButton = document.getElementById('user-button');
    
    if (userMenu && userButton && !userMenu.contains(e.target) && !userButton.contains(e.target)) {
      userMenu.style.display = 'none';
    }
  });

  // ØªØ§Ø¨Ø¹ Ø§Ø¹Ù…Ø§Ù„ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù…Ù†Ùˆ
  function applyMenuSettings() {
    const menuSettings = JSON.parse(localStorage.getItem('menuSettings')) || {
      menu: {
        allProducts: true,
        hats: true,
        shorts: true,
        pants: true,
        tshirts: true,
        trust: true,
        badges: true,
        contact: true,
        admin: true
      }
    };
    
    // Ø§Ø¹Ù…Ø§Ù„ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ
    const menuItems = {
      'menu-all-products': menuSettings.menu.allProducts,
      'menu-hats': menuSettings.menu.hats,
      'menu-shorts': menuSettings.menu.shorts,
      'menu-pants': menuSettings.menu.pants,
      'menu-tshirts': menuSettings.menu.tshirts,
      'menu-trust': menuSettings.menu.trust,
      'menu-badges': menuSettings.menu.badges,
      'menu-contact': menuSettings.menu.contact,
      'menu-contact2': menuSettings.menu.contact,
      'menu-admin': menuSettings.menu.admin
    };
    
    // Ø§Ø¹Ù…Ø§Ù„ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù…Ù†ÙˆÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„
    const mobileMenuItems = {
      'mobile-menu-all-products': menuSettings.menu.allProducts,
      'mobile-menu-hats': menuSettings.menu.hats,
      'mobile-menu-shorts': menuSettings.menu.shorts,
      'mobile-menu-pants': menuSettings.menu.pants,
      'mobile-menu-tshirts': menuSettings.menu.tshirts,
      'mobile-menu-trust': menuSettings.menu.trust,
      'mobile-menu-badges': menuSettings.menu.badges,
      'mobile-menu-contact': menuSettings.menu.contact,
      'mobile-menu-contact2': menuSettings.menu.contact,
      'mobile-menu-admin': menuSettings.menu.admin
    };
    
    // Ø§Ø¹Ù…Ø§Ù„ ØªÙ†Ø¸ÛŒÙ…Ø§Øª
    Object.keys(menuItems).forEach(id => {
      const element = document.getElementById(id);
      if (element) {
        element.style.display = menuItems[id] ? 'block' : 'none';
      }
    });
    
    Object.keys(mobileMenuItems).forEach(id => {
      const element = document.getElementById(id);
      if (element) {
        element.style.display = mobileMenuItems[id] ? 'block' : 'none';
      }
    });
  }

  // Modern Header Functionality
  document.addEventListener('DOMContentLoaded', function() {
    // Ø§Ø¹Ù…Ø§Ù„ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù…Ù†Ùˆ
    applyMenuSettings();
    
    // Header scroll effect
    const header = document.getElementById('modernHeader');
    const hamburger = document.getElementById('modernHamburger');
    const mobileMenu = document.getElementById('modernMobileMenu');
    const searchToggle = document.getElementById('search-toggle');
    const searchPopup = document.getElementById('searchPopup');
    const closeSearch = document.getElementById('close-search');
    const searchInput = document.getElementById('search-input');
    const searchResults = document.getElementById('searchResults');

    // Scroll effect for header
    window.addEventListener('scroll', function() {
      if (window.scrollY > 50) {
        header.classList.add('scrolled');
      } else {
        header.classList.remove('scrolled');
      }
    });

    // Mobile menu toggle
    if (hamburger && mobileMenu) {
      hamburger.addEventListener('click', function() {
        hamburger.classList.toggle('active');
        mobileMenu.style.display = mobileMenu.style.display === 'block' ? 'none' : 'block';
      });

      // Close mobile menu when clicking on links
      mobileMenu.querySelectorAll('a').forEach(link => {
        link.addEventListener('click', function() {
          hamburger.classList.remove('active');
          mobileMenu.style.display = 'none';
        });
      });
    }

    // Search functionality
    if (searchToggle && searchPopup) {
      searchToggle.addEventListener('click', function() {
        searchPopup.classList.add('active');
        setTimeout(() => {
          searchInput.focus();
        }, 100);
      });
    }

    if (closeSearch && searchPopup) {
      closeSearch.addEventListener('click', function() {
        searchPopup.classList.remove('active');
      });
    }

    // Close search popup when clicking outside
    if (searchPopup) {
      searchPopup.addEventListener('click', function(e) {
        if (e.target === searchPopup) {
          searchPopup.classList.remove('active');
        }
      });
    }

    // Live search functionality
    if (searchInput) {
      searchInput.addEventListener('input', function() {
        const query = this.value.trim().toLowerCase();
        if (query.length < 2) {
          searchResults.innerHTML = '';
          return;
        }

        const products = JSON.parse(localStorage.getItem('products')) || [];
        const filteredProducts = products.filter(product => 
          product.name.toLowerCase().includes(query) ||
          (product.category && product.category.toLowerCase().includes(query))
        );

        displaySearchResults(filteredProducts, query);
      });

      // Search on Enter key
      searchInput.addEventListener('keydown', function(e) {
        if (e.key === 'Enter') {
          const query = this.value.trim();
          if (query) {
            // Navigate to first result or show all results
            const products = JSON.parse(localStorage.getItem('products')) || [];
            const filteredProducts = products.filter(product => 
              product.name.toLowerCase().includes(query.toLowerCase()) ||
              (product.category && product.category.toLowerCase().includes(query.toLowerCase()))
            );
            
            if (filteredProducts.length > 0) {
              // Scroll to first product
              const firstProduct = document.querySelector(`[data-name="${filteredProducts[0].name}"]`);
              if (firstProduct) {
                firstProduct.scrollIntoView({ behavior: 'smooth', block: 'center' });
                firstProduct.style.animation = 'pulse 1s ease-in-out';
                setTimeout(() => {
                  firstProduct.style.animation = '';
                }, 1000);
              }
            }
            searchPopup.classList.remove('active');
          }
        }
      });
    }

    // Display search results
    function displaySearchResults(products, query) {
      if (products.length === 0) {
        searchResults.innerHTML = `
          <div class="no-results">
            <p>Ù…Ø­ØµÙˆÙ„ÛŒ Ø¨Ø§ "${query}" ÛŒØ§ÙØª Ù†Ø´Ø¯</p>
            <p style="font-size: 12px; opacity: 0.7;">Ú©Ù„Ù…Ø§Øª Ú©Ù„ÛŒØ¯ÛŒ Ø¯ÛŒÚ¯Ø±ÛŒ Ø§Ù…ØªØ­Ø§Ù† Ú©Ù†ÛŒØ¯</p>
          </div>
        `;
        return;
      }

      searchResults.innerHTML = products.slice(0, 8).map(product => {
        const originalPrice = product.price || 0;
        const discount = product.discount || 0;
        const finalPrice = originalPrice - (originalPrice * discount / 100);
        const highlightedName = product.name.replace(new RegExp(query, 'gi'), match => `<mark>${match}</mark>`);
        
        return `
          <div class="search-result-item" onclick="scrollToProduct('${product.name}')">
            <img src="${product.image}" alt="${product.name}" class="result-img" />
            <div class="result-info">
              <div class="result-title">${highlightedName}</div>
              <div class="result-price">${finalPrice.toLocaleString()} ØªÙˆÙ…Ø§Ù†</div>
              <div class="result-category">${product.category || 'Ø¹Ù…ÙˆÙ…ÛŒ'}</div>
            </div>
          </div>
        `;
      }).join('');
    }

    // Scroll to product function
    window.scrollToProduct = function(productName) {
      const products = document.querySelectorAll('.apple-card');
      const targetProduct = Array.from(products).find(card => 
        card.querySelector('h3').textContent === productName
      );
      
      if (targetProduct) {
        targetProduct.scrollIntoView({ behavior: 'smooth', block: 'center' });
        targetProduct.style.animation = 'pulse 1s ease-in-out';
        setTimeout(() => {
          targetProduct.style.animation = '';
        }, 1000);
      }
      
      searchPopup.classList.remove('active');
    };

    // Keyboard shortcuts
    document.addEventListener('keydown', function(e) {
      // R key for search
      if (e.key === 'r' || e.key === 'R') {
        if (!searchPopup.classList.contains('active')) {
          e.preventDefault();
          searchToggle.click();
        }
      }
      
      // Escape key to close search
      if (e.key === 'Escape') {
        if (searchPopup.classList.contains('active')) {
          searchPopup.classList.remove('active');
        }
      }
    });

    // Add pulse animation
    const style = document.createElement('style');
    style.textContent = `
      @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.05); }
        100% { transform: scale(1); }
      }
    `;
    document.head.appendChild(style);

    // Active navigation link highlighting
    const navLinks = document.querySelectorAll('.modern-nav a');
    navLinks.forEach(link => {
      link.addEventListener('click', function() {
        navLinks.forEach(l => l.classList.remove('active'));
        this.classList.add('active');
      });
    });

      // Initialize header state
  checkAuthStatus();
  updateCartCounter();
});

// Modern Site JavaScript
document.addEventListener('DOMContentLoaded', function() {
  // Scroll to top functionality
  const scrollToTopBtn = document.getElementById('scrollToTop');
  
  window.addEventListener('scroll', function() {
    if (window.pageYOffset > 300) {
      scrollToTopBtn.classList.add('show');
    } else {
      scrollToTopBtn.classList.remove('show');
    }
  });
  
  window.scrollToTop = function() {
    window.scrollTo({
      top: 0,
      behavior: 'smooth'
    });
  };
  
  // Newsletter form
  const newsletterForm = document.querySelector('.newsletter-form');
  if (newsletterForm) {
    newsletterForm.addEventListener('submit', function(e) {
      e.preventDefault();
      const email = this.querySelector('.newsletter-input').value;
      
      if (email) {
        showToast('Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¯Ø± Ø®Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø¹Ø¶Ùˆ Ø´Ø¯ÛŒØ¯!', 'success');
        this.reset();
      }
    });
  }
  
  // Enhanced product rendering
  function renderModernProducts() {
    const container = document.getElementById('product-list');
    const products = JSON.parse(localStorage.getItem('products')) || [];
    
    if (products.length === 0) {
      container.innerHTML = `
        <div style="text-align: center; padding: 60px 20px; grid-column: 1 / -1;">
          <div style="font-size: 4rem; margin-bottom: 20px;">ğŸ“¦</div>
          <h3 style="color: #666; margin-bottom: 10px;">Ù…Ø­ØµÙˆÙ„ÛŒ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯</h3>
          <p style="color: #999;">Ù„Ø·ÙØ§Ù‹ Ø§Ø² Ù¾Ù†Ù„ Ø§Ø¯Ù…ÛŒÙ† Ù…Ø­ØµÙˆÙ„Ø§Øª Ø¬Ø¯ÛŒØ¯ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯</p>
        </div>
      `;
      return;
    }
    
    container.innerHTML = '';
    
    products.forEach(product => {
      const originalPrice = product.price || 0;
      const discount = product.discount || 0;
      const finalPrice = originalPrice - (originalPrice * discount / 100);
      const rating = product.rating || 0;
      const stars = 'â˜…'.repeat(Math.floor(rating)) + 'â˜†'.repeat(5 - Math.floor(rating));
      
      const card = document.createElement('div');
      card.className = 'modern-apple-card';
      
      card.innerHTML = `
        <img src="${product.image}" alt="${product.name}" />
        <div class="modern-card-content">
          <h3 class="modern-card-title">${product.name}</h3>
          <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
            <span style="color: #ffd700; font-size: 14px;">${stars}</span>
            <span style="color: #666; font-size: 12px;">(${rating.toFixed(1)})</span>
          </div>
          <div class="modern-card-price">
            ${discount > 0 ? `<span style="text-decoration: line-through; color: #999; font-size: 1rem; margin-left: 10px;">${originalPrice.toLocaleString()} ØªÙˆÙ…Ø§Ù†</span>` : ''}
            ${finalPrice.toLocaleString()} ØªÙˆÙ…Ø§Ù†
          </div>
          <p class="modern-card-description">${escapeHtml(product.description || '')}</p>
          <div class="modern-card-actions">
            <button class="modern-add-to-cart" data-name="${product.name}" data-price="${finalPrice}" data-image="${product.image}" ${product.stock <= 0 ? 'disabled' : ''}>
              ${product.stock > 0 ? 'Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯' : 'Ù†Ø§Ù…ÙˆØ¬ÙˆØ¯'}
            </button>
            <button class="modern-quick-view" data-product='${JSON.stringify(product)}'>Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø³Ø±ÛŒØ¹</button>
          </div>
        </div>
      `;
      
      container.appendChild(card);
    });
    
    attachModernCartButtons();
    attachModernQuickViewButtons();
  }
  
  // Modern cart button functionality
  function attachModernCartButtons() {
    document.querySelectorAll('.modern-add-to-cart').forEach(button => {
      button.addEventListener('click', function() {
        const name = this.getAttribute('data-name');
        const price = parseInt(this.getAttribute('data-price'));
        const image = this.getAttribute('data-image');
        
        // Check authentication
        const currentUser = JSON.parse(localStorage.getItem('currentUser'));
        if (!currentUser) {
          if (confirm('Ø¨Ø±Ø§ÛŒ Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ù†ÛŒØ§Ø² Ø¨Ù‡ ÙˆØ±ÙˆØ¯ Ø¯Ø§Ø±ÛŒØ¯. Ø¢ÛŒØ§ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ ÙˆØ§Ø±Ø¯ Ø´ÙˆÛŒØ¯ØŸ')) {
            window.location.href = 'auth.html';
          }
          return;
        }
        
        // Per-user cart
        const cartKey = `cart_${currentUser.email}`;
        let cart = JSON.parse(localStorage.getItem(cartKey)) || [];
        
        const existingProduct = cart.find(item => item.name === name);
        if (existingProduct) {
          existingProduct.quantity++;
        } else {
          cart.push({ name, price, quantity: 1, image });
        }
        
        localStorage.setItem(cartKey, JSON.stringify(cart));
        updateCartCounter();
        showToast(`${name} Ø¨Ù‡ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯`, 'success');
      });
    });
  }
  
  // Modern quick view functionality
  function attachModernQuickViewButtons() {
    document.querySelectorAll('.modern-quick-view').forEach(button => {
      button.addEventListener('click', function() {
        const productData = JSON.parse(this.getAttribute('data-product'));
        showModernQuickView(productData);
      });
    });
  }
  
  // Enhanced quick view modal
  function showModernQuickView(product) {
    const modal = document.getElementById('quickViewModal');
    const content = document.getElementById('modalProductContent');
    
    const originalPrice = product.price || 0;
    const discount = product.discount || 0;
    const finalPrice = originalPrice - (originalPrice * discount / 100);
    const rating = product.rating || 0;
    const stars = 'â˜…'.repeat(Math.floor(rating)) + 'â˜†'.repeat(5 - Math.floor(rating));
    
    content.innerHTML = `
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; align-items: start;">
        <div>
          <img src="${product.image}" alt="${product.name}" style="width: 100%; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);" />
        </div>
        <div>
          <h2 style="font-size: 2rem; font-weight: 700; color: #333; margin-bottom: 15px;">${product.name}</h2>
          <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 20px;">
            <span style="color: #ffd700; font-size: 18px;">${stars}</span>
            <span style="color: #666;">(${rating.toFixed(1)})</span>
          </div>
          <div style="margin-bottom: 20px;">
            <span style="font-size: 2rem; font-weight: 800; color: #667eea;">${finalPrice.toLocaleString()} ØªÙˆÙ…Ø§Ù†</span>
            ${discount > 0 ? `<span style="text-decoration: line-through; color: #999; margin-left: 10px;">${originalPrice.toLocaleString()} ØªÙˆÙ…Ø§Ù†</span>` : ''}
          </div>
          <p style="color: #666; line-height: 1.6; margin-bottom: 30px;">${escapeHtml(product.description || '')}</p>
          
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 30px;">
            <div style="background: #f8f9fa; padding: 15px; border-radius: 10px;">
              <div style="font-weight: 600; color: #666; font-size: 12px;">Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ</div>
              <div style="color: #333; margin-top: 5px;">${product.category || 'Ø¹Ù…ÙˆÙ…ÛŒ'}</div>
            </div>
            <div style="background: #f8f9fa; padding: 15px; border-radius: 10px;">
              <div style="font-weight: 600; color: #666; font-size: 12px;">Ù…ÙˆØ¬ÙˆØ¯ÛŒ</div>
              <div style="color: #333; margin-top: 5px;">${product.stock || 0} Ø¹Ø¯Ø¯</div>
            </div>
            <div style="background: #f8f9fa; padding: 15px; border-radius: 10px;">
              <div style="font-weight: 600; color: #666; font-size: 12px;">ØªØ®ÙÛŒÙ</div>
              <div style="color: #333; margin-top: 5px;">${discount}%</div>
            </div>
            <div style="background: #f8f9fa; padding: 15px; border-radius: 10px;">
              <div style="font-weight: 600; color: #666; font-size: 12px;">ÙˆØ¶Ø¹ÛŒØª</div>
              <div style="color: #333; margin-top: 5px;">${product.stock > 0 ? 'Ù…ÙˆØ¬ÙˆØ¯' : 'Ù†Ø§Ù…ÙˆØ¬ÙˆØ¯'}</div>
            </div>
          </div>
          
          <button class="modern-add-to-cart" onclick="addToCartFromModal('${product.name}', ${finalPrice}, '${product.image}')" ${product.stock <= 0 ? 'disabled' : ''} style="width: 100%; padding: 15px; font-size: 1.1rem;">
            ${product.stock > 0 ? 'Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯' : 'Ù†Ø§Ù…ÙˆØ¬ÙˆØ¯'}
          </button>
        </div>
      </div>
    `;
    
    modal.style.display = 'block';
  }
  
  // Enhanced toast notifications
  window.showToast = function(message, type = 'success') {
    const container = document.getElementById('toastContainer');
    const toast = document.createElement('div');
    toast.className = `toast ${type}`;
    
    const icon = type === 'success' ? 'âœ…' : type === 'error' ? 'âŒ' : 'â„¹ï¸';
    
    toast.innerHTML = `
      <span style="font-size: 18px;">${icon}</span>
      <span>${message}</span>
    `;
    
    container.appendChild(toast);
    
    setTimeout(() => {
      toast.style.opacity = '0';
      setTimeout(() => {
        container.removeChild(toast);
      }, 300);
    }, 3000);
  };
  
  // Smooth scrolling for anchor links
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href'));
      if (target) {
        target.scrollIntoView({
          behavior: 'smooth',
          block: 'start'
        });
      }
    });
  });
  
  // Initialize modern site
  renderModernProducts();
  
  // Add loading animation
  window.addEventListener('load', function() {
    document.body.style.opacity = '1';
  });
  
  // Intersection Observer for animations
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
  };
  
  const observer = new IntersectionObserver(function(entries) {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.style.opacity = '1';
        entry.target.style.transform = 'translateY(0)';
      }
    });
  }, observerOptions);
  
  // Observe all cards and features
  document.querySelectorAll('.modern-apple-card, .feature-card').forEach(el => {
    el.style.opacity = '0';
    el.style.transform = 'translateY(30px)';
    el.style.transition = 'all 0.6s ease';
    observer.observe(el);
  });

  // ===== Ø³ÛŒØ³ØªÙ… Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† =====
  
  let userNotificationCenterVisible = false;
  let userNotifications = [];
  let unreadCount = 0;

  // Ù†Ù…Ø§ÛŒØ´/Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ù…Ø±Ú©Ø² Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§
  function toggleUserNotifications() {
    const center = document.getElementById('user-notification-center');
    userNotificationCenterVisible = !userNotificationCenterVisible;
    center.style.display = userNotificationCenterVisible ? 'block' : 'none';
    
    if (userNotificationCenterVisible) {
      loadUserNotifications();
    }
  }

  // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±
  function loadUserNotifications() {
    const currentUser = JSON.parse(localStorage.getItem('currentUser'));
    if (!currentUser) {
      document.getElementById('user-notification-list').innerHTML = '<p style="text-align: center; color: #666; padding: 20px;">Ø¨Ø±Ø§ÛŒ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§ ÙˆØ§Ø±Ø¯ Ø´ÙˆÛŒØ¯</p>';
      return;
    }

    const userNotificationsKey = `userNotifications_${currentUser.email}`;
    userNotifications = JSON.parse(localStorage.getItem(userNotificationsKey)) || [];
    
    const container = document.getElementById('user-notification-list');
    
    if (userNotifications.length === 0) {
      container.innerHTML = '<p style="text-align: center; color: #666; padding: 20px;">Ù‡ÛŒÚ† Ø§Ø¹Ù„Ø§Ù†ÛŒ Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª</p>';
      return;
    }

    container.innerHTML = userNotifications.map(notification => `
      <div class="user-notification-item ${notification.unread ? 'unread' : ''}" onclick="markNotificationAsRead(${notification.id})">
        <div style="font-weight: 600; margin-bottom: 5px;">${notification.title}</div>
        <div style="color: #666; margin-bottom: 5px;">${notification.message}</div>
        <div class="user-notification-time">${new Date(notification.timestamp).toLocaleString('fa-IR')}</div>
      </div>
    `).join('');
  }

  // Ø¹Ù„Ø§Ù…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ Ø§Ø¹Ù„Ø§Ù† Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† Ø®ÙˆØ§Ù†Ø¯Ù‡ Ø´Ø¯Ù‡
  function markNotificationAsRead(notificationId) {
    const currentUser = JSON.parse(localStorage.getItem('currentUser'));
    if (!currentUser) return;

    const userNotificationsKey = `userNotifications_${currentUser.email}`;
    const notifications = JSON.parse(localStorage.getItem(userNotificationsKey)) || [];
    
    const notification = notifications.find(n => n.id === notificationId);
    if (notification) {
      notification.unread = false;
      localStorage.setItem(userNotificationsKey, JSON.stringify(notifications));
      
      // Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡
      updateNotificationBadge();
    }
  }

  // Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§
  function updateNotificationBadge() {
    const currentUser = JSON.parse(localStorage.getItem('currentUser'));
    if (!currentUser) return;

    const userNotificationsKey = `userNotifications_${currentUser.email}`;
    const notifications = JSON.parse(localStorage.getItem(userNotificationsKey)) || [];
    
    unreadCount = notifications.filter(n => n.unread).length;
    const badge = document.getElementById('notification-badge');
    
    if (unreadCount > 0) {
      badge.style.display = 'flex';
      badge.textContent = unreadCount > 99 ? '99+' : unreadCount;
    } else {
      badge.style.display = 'none';
    }
  }

  // Ù†Ù…Ø§ÛŒØ´ Ø§Ø¹Ù„Ø§Ù† toast
  function showUserToastNotification(notification) {
    const toast = document.createElement('div');
    toast.className = `user-toast-notification ${notification.type}`;
    
    const typeIcon = {
      'info': 'â„¹ï¸',
      'success': 'âœ…',
      'warning': 'âš ï¸',
      'promotion': 'ğŸ‰'
    }[notification.type] || 'â„¹ï¸';
    
    toast.innerHTML = `
      <div style="font-weight: 600; margin-bottom: 5px;">${typeIcon} ${notification.title}</div>
      <div style="color: #666;">${notification.message}</div>
    `;
    
    document.body.appendChild(toast);
    
    // Ø­Ø°Ù Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ø¹Ø¯ Ø§Ø² 5 Ø«Ø§Ù†ÛŒÙ‡
    setTimeout(() => {
      toast.style.opacity = '0';
      setTimeout(() => {
        document.body.removeChild(toast);
      }, 300);
    }, 5000);
  }

  // Ø¨Ø±Ø±Ø³ÛŒ Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯
  function checkForNewNotifications() {
    const currentUser = JSON.parse(localStorage.getItem('currentUser'));
    if (!currentUser) return;

    const userNotificationsKey = `userNotifications_${currentUser.email}`;
    const notifications = JSON.parse(localStorage.getItem(userNotificationsKey)) || [];
    
    // Ù†Ù…Ø§ÛŒØ´ Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ø¨Ù‡ ØµÙˆØ±Øª toast
    notifications.forEach(notification => {
      if (notification.showImmediately && !notification.shown) {
        showUserToastNotification(notification);
        notification.shown = true;
      }
    });
    
    localStorage.setItem(userNotificationsKey, JSON.stringify(notifications));
    updateNotificationBadge();
  }

  // Ø¨Ø±Ø±Ø³ÛŒ Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ù‡Ø± 30 Ø«Ø§Ù†ÛŒÙ‡
  setInterval(checkForNewNotifications, 30000);

  // Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ØµÙØ­Ù‡
  updateNotificationBadge();
});
</script>
</body>
</html>