<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>پنل مدیریت - کار اول</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      direction: rtl;
      padding: 20px;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      overflow: hidden;
    }
    
    .header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 30px;
      text-align: center;
    }
    
    .header h1 {
      margin-bottom: 10px;
    }
    
    .stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      padding: 30px;
      background: #f8f9fa;
    }
    
    .stat-card {
      background: white;
      padding: 20px;
      border-radius: 10px;
      text-align: center;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    .stat-number {
      font-size: 32px;
      font-weight: bold;
      color: #667eea;
      margin-bottom: 10px;
    }
    
    .stat-label {
      color: #666;
      font-size: 14px;
    }
    
    .content {
      padding: 30px;
    }
    
    .section {
      margin-bottom: 40px;
    }
    
    .section-title {
      color: #333;
      margin-bottom: 20px;
      font-size: 20px;
      font-weight: bold;
      border-bottom: 2px solid #667eea;
      padding-bottom: 10px;
    }
    
    .form-group {
      margin-bottom: 20px;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 8px;
      color: #333;
      font-weight: 600;
    }
    
    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 12px 15px;
      border: 2px solid #e1e5e9;
      border-radius: 8px;
      font-size: 14px;
      transition: border-color 0.3s ease;
    }
    
    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: #667eea;
    }
    
    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
    }
    
    .btn {
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      margin: 5px;
    }
    
    .btn-primary { background: #667eea; color: white; }
    .btn-success { background: #27ae60; color: white; }
    .btn-warning { background: #f39c12; color: white; }
    .btn-danger { background: #e74c3c; color: white; }
    
    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }
    
    .products-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    
    .product-card {
      background: #f8f9fa;
      border-radius: 10px;
      padding: 20px;
      border: 1px solid #e1e5e9;
    }
    
    .product-image {
      width: 100%;
      height: 200px;
      object-fit: cover;
      border-radius: 8px;
      margin-bottom: 15px;
    }
    
    .product-name {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 10px;
      color: #333;
    }
    
    .product-info {
      margin-bottom: 15px;
    }
    
    .product-info p {
      margin: 5px 0;
      color: #666;
    }
    
    .product-actions {
      display: flex;
      gap: 10px;
    }
    
    .badge {
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: bold;
      color: white;
      margin: 2px;
      display: inline-block;
    }
    
    .badge.discount { background: #ff6b6b; }
    .badge.new { background: #2ed573; }
    .badge.popular { background: #ffa502; }
    
    .stock-status {
      padding: 4px 8px;
      border-radius: 10px;
      font-size: 12px;
      font-weight: bold;
    }
    
    .stock-status.in-stock {
      background: #d4edda;
      color: #155724;
    }
    
    .stock-status.out-of-stock {
      background: #f8d7da;
      color: #721c24;
    }
    
    @media (max-width: 768px) {
      .form-row {
        grid-template-columns: 1fr;
      }
      
      .products-grid {
        grid-template-columns: 1fr;
      }
      
      .stats {
        grid-template-columns: 1fr 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>پنل مدیریت کار اول</h1>
      <p>مدیریت محصولات و سفارشات</p>
    </div>
    
    <div class="stats">
      <div class="stat-card">
        <div class="stat-number" id="totalProducts">0</div>
        <div class="stat-label">کل محصولات</div>
      </div>
      <div class="stat-card">
        <div class="stat-number" id="totalOrders">0</div>
        <div class="stat-label">کل سفارشات</div>
      </div>
      <div class="stat-card">
        <div class="stat-number" id="totalRevenue">0</div>
        <div class="stat-label">درآمد کل (تومان)</div>
      </div>
      <div class="stat-card">
        <div class="stat-number" id="lowStock">0</div>
        <div class="stat-label">محصولات کم‌موجود</div>
      </div>
    </div>
    
    <div class="content">
      <!-- دکمه‌های عملیات -->
      <div class="section">
        <div class="section-title">عملیات سریع</div>
        <button class="btn btn-success" onclick="addSampleProducts()">افزودن محصولات نمونه</button>
        <button class="btn btn-primary" onclick="refreshData()">بروزرسانی داده‌ها</button>
        <button class="btn btn-danger" onclick="clearAllData()">پاک کردن همه داده‌ها</button>
      </div>
      
      <!-- فرم افزودن محصول -->
      <div class="section">
        <div class="section-title">افزودن محصول جدید</div>
        <form id="product-form">
          <div class="form-row">
            <div class="form-group">
              <label>نام محصول *</label>
              <input type="text" id="product-name" required />
            </div>
            <div class="form-group">
              <label>قیمت (تومان) *</label>
              <input type="number" id="product-price" required min="0" />
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label>موجودی *</label>
              <input type="number" id="product-stock" required min="0" value="10" />
            </div>
            <div class="form-group">
              <label>تخفیف (%)</label>
              <input type="number" id="product-discount" min="0" max="100" value="0" />
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label>دسته‌بندی</label>
              <select id="product-category">
                <option value="الکترونیک">الکترونیک</option>
                <option value="پوشاک">پوشاک</option>
                <option value="کتاب">کتاب</option>
                <option value="ورزشی">ورزشی</option>
                <option value="خانگی">خانگی</option>
                <option value="عمومی">عمومی</option>
              </select>
            </div>
            <div class="form-group">
              <label>امتیاز (1-5)</label>
              <input type="number" id="product-rating" min="0" max="5" step="0.1" value="0" />
            </div>
          </div>
          
          <div class="form-group">
            <label>آدرس تصویر *</label>
            <input type="url" id="product-image" required placeholder="https://example.com/image.jpg" />
          </div>
          
          <div class="form-group">
            <label>توضیحات</label>
            <textarea id="product-description" rows="3" placeholder="توضیحات محصول را وارد کنید..."></textarea>
          </div>
          
          <button type="submit" class="btn btn-primary">افزودن محصول</button>
        </form>
      </div>
      
      <!-- نمایش محصولات -->
      <div class="section">
        <div class="section-title">محصولات موجود</div>
        <div class="products-grid" id="products-grid">
          <!-- محصولات اینجا نمایش داده می‌شوند -->
        </div>
      </div>
    </div>
  </div>

  <script>
    // بارگذاری اولیه
    document.addEventListener('DOMContentLoaded', function() {
      console.log('Admin panel loaded');
      refreshData();
    });

    // فرم افزودن محصول
    document.getElementById('product-form').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const product = {
        id: Date.now(),
        name: document.getElementById('product-name').value,
        price: parseInt(document.getElementById('product-price').value),
        discount: parseInt(document.getElementById('product-discount').value) || 0,
        stock: parseInt(document.getElementById('product-stock').value),
        rating: parseFloat(document.getElementById('product-rating').value) || 0,
        category: document.getElementById('product-category').value,
        image: document.getElementById('product-image').value,
        description: document.getElementById('product-description').value,
        isNew: false,
        isPopular: false
      };
      
      addProduct(product);
      this.reset();
    });

    // افزودن محصول
    function addProduct(product) {
      const products = JSON.parse(localStorage.getItem('products')) || [];
      products.push(product);
      localStorage.setItem('products', JSON.stringify(products));
      
      refreshData();
      alert('محصول با موفقیت اضافه شد!');
    }

    // نمایش محصولات
    function displayProducts() {
      const products = JSON.parse(localStorage.getItem('products')) || [];
      const grid = document.getElementById('products-grid');
      
      if (products.length === 0) {
        grid.innerHTML = '<p style="text-align: center; color: #666; grid-column: 1/-1;">هیچ محصولی موجود نیست</p>';
        return;
      }
      
      grid.innerHTML = '';
      
      products.forEach(product => {
        const badges = [];
        if (product.discount > 0) badges.push(`<span class="badge discount">${product.discount}% تخفیف</span>`);
        if (product.isNew) badges.push('<span class="badge new">جدید</span>');
        if (product.isPopular) badges.push('<span class="badge popular">محبوب</span>');
        
        const stockClass = product.stock > 0 ? 'in-stock' : 'out-of-stock';
        const stockText = product.stock > 0 ? `${product.stock} عدد` : 'ناموجود';
        
        const card = document.createElement('div');
        card.className = 'product-card';
        card.innerHTML = `
          <img src="${product.image}" alt="${product.name}" class="product-image" onerror="this.src='https://via.placeholder.com/300x200?text=تصویر'" />
          <div class="product-name">${product.name}</div>
          <div class="product-info">
            <p><strong>قیمت:</strong> ${product.price.toLocaleString()} تومان</p>
            <p><strong>دسته‌بندی:</strong> ${product.category || 'عمومی'}</p>
            <p><strong>موجودی:</strong> <span class="stock-status ${stockClass}">${stockText}</span></p>
            <p><strong>امتیاز:</strong> ${product.rating ? product.rating.toFixed(1) : '0.0'} ⭐</p>
            <div>${badges.join(' ')}</div>
          </div>
          <div class="product-actions">
            <button class="btn btn-warning" onclick="editProduct(${product.id})">ویرایش</button>
            <button class="btn btn-danger" onclick="deleteProduct(${product.id})">حذف</button>
          </div>
        `;
        
        grid.appendChild(card);
      });
    }

    // حذف محصول
    function deleteProduct(id) {
      if (confirm('آیا از حذف این محصول اطمینان دارید؟')) {
        const products = JSON.parse(localStorage.getItem('products')) || [];
        const filteredProducts = products.filter(p => p.id !== id);
        localStorage.setItem('products', JSON.stringify(filteredProducts));
        
        refreshData();
        alert('محصول حذف شد!');
      }
    }

    // ویرایش محصول (ساده)
    function editProduct(id) {
      const products = JSON.parse(localStorage.getItem('products')) || [];
      const product = products.find(p => p.id === id);
      
      if (product) {
        const newName = prompt('نام جدید محصول:', product.name);
        const newPrice = prompt('قیمت جدید (تومان):', product.price);
        const newStock = prompt('موجودی جدید:', product.stock);
        
        if (newName && newPrice && newStock) {
          product.name = newName;
          product.price = parseInt(newPrice);
          product.stock = parseInt(newStock);
          
          localStorage.setItem('products', JSON.stringify(products));
          refreshData();
          alert('محصول ویرایش شد!');
        }
      }
    }

    // افزودن محصولات نمونه
    function addSampleProducts() {
      const sampleProducts = [
        {
          id: Date.now(),
          name: "لپ‌تاپ اپل مک‌بوک پرو",
          price: 85000000,
          discount: 15,
          stock: 5,
          rating: 4.8,
          category: "الکترونیک",
          image: "https://images.unsplash.com/photo-1517336714731-489689fd1ca8?w=300",
          description: "لپ‌تاپ قدرتمند اپل با پردازنده M2",
          isNew: true,
          isPopular: true
        },
        {
          id: Date.now() + 1,
          name: "کفش ورزشی نایک",
          price: 1200000,
          discount: 0,
          stock: 20,
          rating: 4.5,
          category: "ورزشی",
          image: "https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=300",
          description: "کفش ورزشی راحت و سبک",
          isNew: false,
          isPopular: true
        },
        {
          id: Date.now() + 2,
          name: "کتاب برنامه‌نویسی JavaScript",
          price: 450000,
          discount: 10,
          stock: 15,
          rating: 4.2,
          category: "کتاب",
          image: "https://images.unsplash.com/photo-1481627834876-b7833e8f5570?w=300",
          description: "کتاب جامع آموزش JavaScript",
          isNew: true,
          isPopular: false
        }
      ];
      
      const existingProducts = JSON.parse(localStorage.getItem('products')) || [];
      const allProducts = [...existingProducts, ...sampleProducts];
      localStorage.setItem('products', JSON.stringify(allProducts));
      
      refreshData();
      alert('محصولات نمونه اضافه شدند!');
    }

    // بروزرسانی داده‌ها
    function refreshData() {
      displayProducts();
      updateStats();
    }

    // بروزرسانی آمار
    function updateStats() {
      const products = JSON.parse(localStorage.getItem('products')) || [];
      const cart = JSON.parse(localStorage.getItem('cart')) || [];
      
      document.getElementById('totalProducts').textContent = products.length;
      document.getElementById('totalOrders').textContent = cart.length;
      
      const totalRevenue = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
      document.getElementById('totalRevenue').textContent = totalRevenue.toLocaleString();
      
      const lowStockCount = products.filter(p => p.stock > 0 && p.stock <= 5).length;
      document.getElementById('lowStock').textContent = lowStockCount;
    }

    // پاک کردن همه داده‌ها
    function clearAllData() {
      if (confirm('آیا از پاک کردن همه داده‌ها اطمینان دارید؟')) {
        localStorage.removeItem('products');
        localStorage.removeItem('cart');
        refreshData();
        alert('همه داده‌ها پاک شدند!');
      }
    }
  </script>
</body>
</html> 